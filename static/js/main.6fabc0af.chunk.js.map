{"version":3,"sources":["game/images/gamesketchimg.jpg","game/images/ectsSprite.jpg","game/images/profSprite.jpg","game/images/mapTileImage.jpg","game/images/playerSprite.jpg","game/images/projectileSpriteImage.jpg","game/Controls.tsx","game/Config.tsx","game/Map/MapTileType.tsx","game/Levels/Level.tsx","game/Entities/Entity.tsx","game/Entities/items/Item.tsx","game/SpritePosition.tsx","game/Entities/items/Ects.tsx","game/Entities/characters/Character.tsx","game/Entities/characters/Npc.tsx","game/Entities/characters/Prof.tsx","game/Map/MapTile.tsx","game/Map/Map.tsx","game/Levels/Levels.tsx","game/Entities/projectiles/Projectile.tsx","game/Entities/characters/Player.tsx","game/Collision/Collision.tsx","game/Collision/CollisionMap.tsx","game/Collision/SpecialCollisionEvents.tsx","game/Gamecanvas.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","Controls","window","onkeydown","e","keyCode","preventDefault","heldLeft","heldUp","heldRight","heldDown","Escape","heldE","onkeyup","Config","canvasSize","w","h","gravity","fps","gameInterval","MapTileType","Level","name","backgroundColor","map","enemies","ects","_name","_backgroundColor","_map","_enemies","_items","this","value","Entity","xPos","yPos","spriteMap","spritePos","sourceSize","targetSize","collision","_id","_xPos","_yPos","_collision","_spriteMap","_spritePos","_sourceSize","_targetSize","uuidv4","Item","isCollected","_isCollected","ticks","SpritePosition","tileX","tileY","_tileX","_tileY","spriteSizeWidth","spriteSizeHeight","Ects","Image","src","ectsSpriteImage","Character","xVelocity","xVelocityJump","yVelocity","friction","lives","_xSpeed","_ySpeed","_xVelocity","_xVelocityJump","_yVelocity","_friction","_lives","Npc","speedLimitY","_speedLimitY","kill","switchDirection","mapWidth","Prof","profSpriteImage","movingRight","movingLeft","xSpeed","moveLeft","moveRight","mapTileToBotLeft","getMapTileAtXY","solid","hurtful","mapTileToBotRight","ySpeed","MapTile","type","_xPosCanvas","_yPosCanvas","_solid","_hurtful","_type","setFriction","newMapTile","xPosCanvas","yPosCanvas","ICE","Map","template","_mapTiles","_numberOfDisplayedTilesWidth","_numberOfDisplayTilesHeight","_mapWidth","_mapHeight","generateMapTiles","mapTileImage","length","mapTiles","forEach","layer","layerIndex","currentLayerTiles","tileIndex","newTileIndex","push","tiles","cloneTile","mapHeight","x","y","xTileIndex","Math","trunc","yTileIndex","DEFAULT","Levels","relativeMapPos","levels","getCoordinateForRelativeMapPos","Projectile","_directionRight","projectileSpriteImage","_hasCollided","Player","playerSpriteImage","_speedLimitX","_tookDamage","_ects","_facingRight","takeDamage","projectile","updatePos","Collision","top","bot","left","right","_top","_bot","_right","_left","CollisionMap","collisionObjects","_collisionObjects","obj1","obj2","obj1MiddleX","obj1MiddleY","obj1RightX","obj1BotY","obj2RightX","obj2BotY","inRange","player","npc","collides","smallJump","mapTile","specialCollisionEvents","HURTFUL","TRAMPOLINE","bigJump","EXIT","levelEnd","enemy","item","addEcts","min","max","SpecialCollisionEvents","Canvas","props","gameCanvasRef","gameSketchImgRef","ctx","currentLevel","levelPosX","collisionMap","characters","projectiles","currentEctsScore","React","createRef","gameLoop","bind","startGame","canvas","current","getContext","img","currentSrc","onload","drawImage","width","height","ref","gamesketchimg","className","alt","registerKeyEvents","initializeLevel","clearInterval","setInterval","slice","drawLevel","updatePlayer","updateNpc","updateItems","updateProjectiles","drawEntities","items","drawUI","drawControls","tookDamage","respawnPlayer","isDead","gameOver","resetPlayer","concat","flat","filter","console","log","getGroundLevel","clearRect","indexFirstTile","offset_x","indexLastTile","numberOfDisplayedTilesWidth","mapTileLayer","index","drawLayer","currentLayerIndex","indexCurrentTile","getXPosForSpriteWidth","getYPosForSpriteHeight","entities","entity","accelerateRight","accelerateLeft","jump","shoot","abs","animate","applyGravity","checkLevelEdgeCollision","updateMapPosition","checkPlayerCollisions","object","splice","findIndex","id","move","checkEnemyCollisions","hasCollided","checkProjectileCollisions","handleLevelEdgeCollision","fellOutOfMap","collisionObject","checkCollision","doesCollide","specialCollisionEvent","processPlayerNpcCollision","processPlayerMapTileCollision","processPlayerItemCollision","endLevel","processEnemyMapTileCollision","Component","App","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.6fabc0af.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/gamesketchimg.a7e81afa.jpg\";","module.exports = \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAQCAYAAABQrvyxAAACAUlEQVRIS9VWsUoDQRCdU8mBpSISWxW5gFapTOFHBOyFFAFrv8JaSCGkFSEfYRErO0EbbSy8QrAPGE9mdmezu7ezm6CCbhPI7ZuZ997s7Gbwz1eWqr8aQIV7sj4k94ZifQfP2Fj+aFF2gEVJ+FgmN48QDrbIAR4nRhsfLxLgIOXxJTSve2KAmOqAyVttgIc7KPcvTJwYCVN8t0M4xJfLJ5SG67DxQQJOEF0hBgkF8AkYLBdvbeAYEoEk9v6U3IgRoH6vBgCsXrYxNiVUbx2A0Th2HhT+RiuPZyeAD7UjFp/1VSrKo5eNf32fdQOT8B2oqHh1aGkhaGutR0E5GO4RVFT4IofsSPUt4/nXCOQNBiZA5PFbAi8SYAUxwFN5Bqv5nkMg4YJyQJPFonGhALYQ9KfnpO8AiiXi8WzoVqo5MLnahUbzpabAQg50Z24FHQi0ouNAq23cDnYAuiQRMBZ3O/D8cUhi7TTPTV+iMrEWmhfvnwPHAX2G7PzU/9MhEbPaPJOnEI4xACKxvXKr+nJ2IJPjFyJ4SQCaQkWuRu50KOa38fExWuTwuXkAS+sNNZP1hZK6jLgQugP8NVJTLRTDGaO4ycZjflxeDWklEYRqRhL7NQbn+ZwCiHeBgP/9p0TiKVC3SP1Tc0NwP/lA+6nHmNQ2EgGHhN4UarskgViCv/DtC4s4VCDE80mRAAAAAElFTkSuQmCC\"","module.exports = \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAgCAYAAADaInAlAAADPklEQVR4Xu2bMWgUQRSG98BO1GCaHIIEm7ioCNqJnY2FXmchCCqijY2NhUoqEQsbBW0E0SJgYRctbOzETkEU1zQiQrhYnETFTjiZ2bzh3bi7M2/vzYznvWtus7c7773//967uVzSyeQx1Qp0qNVfPLxv2HTPvZfvyGtScpD4vPqTzRIDeA2gwK+u5dbfGwBXYCjky/ovffj0/SfvtX1EkPjN4LXV39skMSCMAT7w+3R+MABs46HDd85sHskdzuOTHFNA4o+Cx62/cwKIAWENcE2A0Pp7A1DV4TAFFu9cNXWcP33NHHNOAIlf7q3wg0P/oABwbAahA9oAIPHdm3EnAMf37hr53L/87LaGsHfsUgYE3l26YcD8OihJnTt40rm2a/yp1yV+WP2dJokBYQ1wNUFo/ckAQMIwCewCPsz39Kk9WeZc21V81QSQ+KUCXPo7TbIJFAN4DXA1QWj9nQBAgnWjyC6Aew8g8UsFQukvALhacOP1UAZ4hk8PACS69vpx47eBXLv/OmEkPq/+3hNAACgV+N8AJANwZvGWngCDtVUtyOzcDv386Ppl8lq+4w9fJ/F59SebJgbwGkBtAm79WwPw8NyCzv3sg5UkE2Ca40PtHPpPLACqeAxB7LegVAAOPy+bTTg03zhvwRMNAIagM98j10Idv+p6GMEpAcDGQw1tG4AsWmoBID42r/vxhfnx5pPnnSsnjuouUcdtTG66J2b9uA44Vrn1dx/5K8WoAGDBIaG2CVANqgMAG4/X5IZAxY9RPzYc6oEakwFQRaHdfVRDqde7JkDVelwQxKq/ynxc1z8BQEihfUawfY3dlSGmgMuYEKDZdVaZH20TGEsA11Q4dWBBv8d3Z7bpSzfNbq+9hcsUFSBm/U2xfg++6Xr769/189KbldZ7HdKNMQVogsAXAE7zYwPQFG+qAYBv5dQfnF44tF9Pgvuv3pqdP94wuSYJ9fUUDWDHHKz2ddqqZqwFtRa4njQBcBAVvLt1i0mmbQLU++oAwB3D3flVOQJ8/R8/2f8Lyo6HPw5i6JMCkGXZMM9zk2tRFK1hIkJgfhOWKL5ON89zk0dRFOpUlPor4o7VzOMkLQBsSD/JAPwBALNNTp/ZM+IAAAAASUVORK5CYII=\"","module.exports = \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAYAAAB3AH1ZAAACB0lEQVRIS5WVv0uCQRjH703QhCQooaIGMwgi2qpVqKWgIcKpKfoDWgohaHBva2uqKQhao4YIrD+hIgoyByMCC0LBErT4nnyP5z3vNbvlvR/P3fdzz/M99dTF7Y/6o63lztRhatEXxbml8o6eT8VrvvVcKdxyKmPOn+pmzesEANESQvbni5sq2httAcAeQFCUQBgDYGEspL8GIDsyaaiyxTvTD70nVL2/oAFkY0YkgBSUsZivflY1KNrM4LS6erjWYw0gxeVGCcIs4CvLsRvJ+MB4u4+9hrpZ7dZrU0df+ssxANAA8S8Al1UIAOHZU88XAkFbHOO+ja7OPcDUy1tP1JLmgPVYWtcS4pXqt+qJRny3JQA3yBiA6AywzgjC4ffhvI4PqjsPQ+zywYqBkYdLQfQJhr6Ma/sKgpwv87y9v2WG8aFh3S+9vvhK4QIjiBc6rujfAThdtnZvH3HMGgEobgNAnBmQfWr5SsDasgQu09lzAAi6uZ1uZqKlBLjNeKzpTIpLX7hAsI6WOUm3AACokG/6yG7wgsyE8QAF595G1eXAs06xhJJjgtompJgNkEg2Xw2gAIB1+sQHQC8QxhbF+mO5ocGYKZSgnfuxBwAUtMulTcibUkCC2KVxeUDWVq7Lp2fvYxmczzDod4GHsP54OfIZ2qaTokFG/fPf0PUyJKCrBEHv3gX4C3fMWq16oO9EAAAAAElFTkSuQmCC\"","module.exports = \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAgCAYAAADaInAlAAAC9ElEQVR4Xu2bMUgcURCGd5FABAubQOw03RYpQkgR0tgIV6h4hRJDbFIl6S0ipBK0SJ9YXSOoaHFBxRzYpAmpgkWKLQJeuuQIQgpjAkFW3pyz3D5ub9579/YttzvX7N3e7v4z/3wz+/ZE3+NXqR3wdbOPNryo1zn+c0/7mjoxsL5d/7WLxQWwWwAd+MWxtv1XBoASxkSav4bg7Z3Xl8rXVjGB9XuDZ+q/cpG4ANkUQAV+lc7PDAC58NjhE7cuE7HjfjmhficB6yfBs+0/OQG4ANkWgJoAWfuvDEBah+MkaD3Yhlwujp4mcrI1AVi/vbaSX/36zwAQLYgdmBeAp6tDPR+7MwdADmBiqQ6WNTersI3XApV9+Nw6+5OYBP1OANZPAmDbf3ICDHoBsMFNQSx6/toAoKFIojxB/fFZ2HW6auf3gLQRSOl7XvsXSTzfFgBFy58BINYApgAOSgOQAKA/aaNQ9g/XALfvLypfm3oU6uxkqgNZv70GU/VfuUgMQPfF2KA3gDIAmOjPL9s9H0tUyVPp+m7HsL5d/xkATRKLBqA2ANP1OZgAd7f+gXVfn9yE7WH1vfa1VLx/NV9JTBzUc6Uvx1i0/LWL5tqAWq0WffuwG9ehbABknT8JgNyBWIm1Ny/h7cryW9iu7zXIa6l0vHyMbIBr/aLnTxaNC5CcQEUDUBsAHMEH956BFzMntVzWAK7000awK/20NZAtfRKArAOgbgus330RnDsAcuFcPwWwftIBU/+NJ4CrAqQ9hrnST5tArvSzzp8BIO5BpQcgzZ+ppc/RyMgYfF1/N06CRN3rdb4X2uL4vPSFdvXFd4jh/PyHd7z50Gn+ndoihn70jQNnAEoOwKOZnejG8Cg07sfdijFIOp0vjhW6Yvvp4LE/udCA9y71MV7U/v/3N8Sim4fp8Z05d3phej3jwBmANnylBUD8m1oQBDF4YRgaw6RJb/zHoZz0IdwgCOI4wjAUu5zk30UX7TPSNzrpWpEBuDZikAG4AoTccE5ZZQccAAAAAElFTkSuQmCC\"","module.exports = \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAf0lEQVQ4T7VTWw7AIAjD+x/aBZOSIo/FmfknpZVHHZKfWcQ1PBhzFxFh4o4pL+CcBDAj7gVZLpJPyBBbHBXoyK8tQaCbRTuzTKCqKIvPXwSwrqqt4AMtLUu+FmDXVduwGQSLbq7jlTvzsZFOHGirvXHiEvn6F0IFzt/NVwZkDz/OZygJThsIYgAAAABJRU5ErkJggg==\"","\r\nclass Controls {\r\n\r\n    static heldLeft: boolean = false;\r\n    static heldRight: boolean = false;\r\n    static heldUp: boolean = false;\r\n    static heldDown: boolean = false;\r\n    static Escape: boolean = false;\r\n    static heldE: boolean = false;\r\n\r\n    static registerKeyEvents(){\r\n        window.onkeydown = function (e: any) {\r\n            switch (e.keyCode) {\r\n                case 37: // left\r\n                    e.preventDefault();\r\n                    Controls.heldLeft = true;\r\n                    break;\r\n                case 32: // space\r\n                    e.preventDefault();\r\n                    Controls.heldUp = true;\r\n                    break;\r\n                case 38: // up\r\n                    e.preventDefault();\r\n                    Controls.heldUp = true;\r\n                    break;\r\n                case 39: // right\r\n                    e.preventDefault();\r\n                    Controls.heldRight = true;\r\n                    break;\r\n                case 40: // down\r\n                    e.preventDefault();\r\n                    Controls.heldDown = true;\r\n                    break;\r\n                case 27: // escape\r\n                    e.preventDefault();\r\n                    Controls.Escape = true;\r\n                    break;\r\n                case 69: // E\r\n                    e.preventDefault();\r\n                    Controls.heldE = true;\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n            return false;\r\n        };\r\n    \r\n        window.onkeyup = function (e: any) {\r\n            switch (e.keyCode) {\r\n                case 37: // left\r\n                    e.preventDefault();\r\n                    Controls.heldLeft = false;\r\n                    break;\r\n                case 32: // space\r\n                    e.preventDefault();\r\n                    Controls.heldUp = false;\r\n                    break;\r\n                case 38: // up\r\n                    e.preventDefault();\r\n                    Controls.heldUp = false;\r\n                    break;\r\n                case 39: // right\r\n                    e.preventDefault();\r\n                    Controls.heldRight = false;\r\n                    break;\r\n                case 40: // down\r\n                    e.preventDefault();\r\n                    Controls.heldDown = false;\r\n                    break;\r\n                case 69: // e\r\n                    e.preventDefault();\r\n                    Controls.heldE = false;\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Controls;","export default class Config {\r\n\r\n    static canvasSize: any = {w:755, h:425};\r\n    static gravity: number = 2;\r\n    static fps: number = 30;\r\n    static gameInterval: any;\r\n\r\n}","export enum MapTileType{\r\n    DEFAULT,\r\n    HIDDEN,\r\n    HURTFUL,\r\n    EXIT,\r\n    TRAMPOLINE,\r\n    ICE\r\n}","import Npc from \"../Entities/characters/Npc\";\r\nimport Item from \"../Entities/items/Item\";\r\nimport Map from \"../Map/Map\";\r\n\r\nexport default class Level {\r\n\r\n    private _name: string;\r\n    \r\n    private _backgroundColor: string;\r\n    \r\n    private _map: Map;\r\n     \r\n    private _enemies: Npc[];\r\n    private _items: Item[];\r\n   \r\n\r\n    constructor(name: string, backgroundColor: string, map: Map, enemies: Npc[], ects: Item[]) {\r\n\r\n        this._name = name;\r\n        this._backgroundColor = backgroundColor;\r\n        this._map = map;\r\n        this._enemies = enemies;\r\n        this._items = ects;\r\n\r\n    }\r\n\r\n    public get name(): string {\r\n        return this._name;\r\n    }\r\n\r\n    public get backgroundColor(): string {\r\n        return this._backgroundColor;\r\n    }\r\n\r\n    public get map(): Map {\r\n        return this._map;\r\n    }\r\n\r\n    public get enemies(): Npc[] {\r\n        return this._enemies;\r\n    }\r\n\r\n    public get items(): Item[] {\r\n        return this._items;\r\n    }\r\n    public set items(value:Item[]){\r\n        this._items = value;\r\n    }\r\n}","import SpritePosition from \"../SpritePosition\";\r\nimport ICollisionObject from \"../Collision/ICollisionObject\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport Map from \"../Map/Map\";\r\n\r\nexport default class Entity implements ICollisionObject{\r\n    private _id: string;\r\n    private _xPos: number;\r\n    private _yPos: number;\r\n    private _collision: boolean;\r\n    \r\n    \r\n    private _spriteMap: HTMLImageElement;\r\n    private _spritePos: SpritePosition;\r\n    private _sourceSize: number;\r\n    private _targetSize: number;\r\n\r\n    constructor(xPos:number, yPos:number, spriteMap:HTMLImageElement, spritePos:SpritePosition, sourceSize:number, targetSize:number, collision: boolean) {\r\n        this._xPos = xPos;\r\n        this._yPos = yPos;\r\n        this._collision = collision;\r\n\r\n        this._spriteMap = spriteMap;\r\n        this._spritePos = spritePos;\r\n        this._sourceSize = sourceSize;\r\n        this._targetSize = targetSize;\r\n        this._id = uuidv4();\r\n    }\r\n\r\n    public handleLevelEdgeCollision(map: Map){}\r\n\r\n    public fellOutOfMap(){}\r\n\r\n    public get id(): string {\r\n        return this._id;\r\n    }\r\n\r\n    public get xPos(): number {\r\n        return this._xPos;\r\n    }\r\n    public set xPos(value: number) {\r\n        this._xPos = value;\r\n    }\r\n\r\n    public get yPos(): number {\r\n        return this._yPos;\r\n    }\r\n    public set yPos(value: number) {\r\n        this._yPos = value;\r\n    }\r\n\r\n    public get spriteMap(): HTMLImageElement {\r\n        return this._spriteMap;\r\n    }\r\n    public set spriteMap(value: HTMLImageElement) {\r\n        this._spriteMap = value;\r\n    }\r\n\r\n    public get spritePos(): SpritePosition {\r\n        return this._spritePos;\r\n    }\r\n    public set spritePos(value: SpritePosition) {\r\n        this._spritePos = value;\r\n    }\r\n    \r\n    public get sourceSize(): number {\r\n        return this._sourceSize;\r\n    }\r\n    public set sourceSize(value: number) {\r\n        this._sourceSize = value;\r\n    }\r\n\r\n    public get targetSize(): number {\r\n        return this._targetSize;\r\n    }\r\n    public set targetSize(value: number) {\r\n        this._targetSize = value;\r\n    }\r\n    public get collision(): boolean {\r\n        return this._collision;\r\n    }\r\n}","import Entity from \"../Entity\";\r\nimport SpritePosition from \"../../SpritePosition\";\r\n\r\nexport default class Item extends Entity{\r\n    private _isCollected: boolean;\r\n   \r\n    \r\n    // eslint-disable-next-line\r\n    constructor(xPos:number, yPos:number, spriteMap:HTMLImageElement, spritePos:SpritePosition, sourceSize:number, targetSize:number, collision: boolean, isCollected: boolean) {\r\n        super(xPos, yPos, spriteMap, spritePos, sourceSize, targetSize, collision);\r\n        this._isCollected = isCollected;\r\n    }\r\n\r\n    public get isCollected(): boolean {\r\n        return this._isCollected;\r\n    }\r\n    public set isCollected(value: boolean) {\r\n        this._isCollected = value;\r\n    }\r\n\r\n    public animate(ticks:number){}\r\n\r\n\r\n}","/**\r\n * \r\n * helper class for transforming relative positions of sprites in a sprite image\r\n * into x and y pixel values depending on the used sprite size\r\n * \r\n */\r\nexport default class SpritePosition {\r\n\r\n    private _tileX: number;\r\n    \r\n    private _tileY: number;\r\n    \r\n    constructor(tileX: number, tileY: number) {\r\n\r\n        this._tileX = tileX;\r\n        this._tileY = tileY;\r\n    }\r\n\r\n    public get tileX(): number {\r\n        return this._tileX;\r\n    }\r\n\r\n    public set tileX(value: number) {\r\n        this._tileX = value;\r\n    }\r\n\r\n    public get tileY(): number {\r\n        return this._tileY;\r\n    }\r\n\r\n    public set tileY(value: number) {\r\n        this._tileY = value;\r\n    }\r\n\r\n\r\n    public getXPosForSpriteWidth(spriteSizeWidth:number): number {\r\n        return spriteSizeWidth*this._tileX;\r\n    }\r\n\r\n    public getYPosForSpriteHeight(spriteSizeHeight:number): number {\r\n        return spriteSizeHeight*this._tileY;\r\n    }\r\n}","import Item from './Item';\r\nimport SpritePosition from '../../SpritePosition';\r\nimport ectsSpriteImage from '../../images/ectsSprite.jpg';\r\n\r\nexport default class Ects extends Item{\r\n\r\n    constructor(xPos:number, yPos:number) {\r\n        let spriteMap = new Image();\r\n        spriteMap.src = ectsSpriteImage;\r\n        let spritePos = new SpritePosition(0,0);\r\n        let sourceSize = 16;\r\n        let targetSize = 32;\r\n        let collision = true;\r\n        let isCollected = false;\r\n        super(xPos, yPos, spriteMap, spritePos, sourceSize, targetSize, collision, isCollected);\r\n    }\r\n\r\n    public animate(ticks:number){\r\n\r\n        if(ticks % 10 === 0){\r\n            \r\n            switch (this.spritePos.tileX){ \r\n                case 0:\r\n                    this.spritePos.tileX = 1;\r\n                    break;\r\n                case 1:\r\n                    this.spritePos.tileX = 2;\r\n                    break;\r\n                case 2:\r\n                    this.spritePos.tileX = 0;\r\n                    break;\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n}","import Entity from \"../Entity\";\r\nimport SpritePosition from \"../../SpritePosition\";\r\n\r\nexport default class Character extends Entity{\r\n\r\n    private _xSpeed: number;\r\n    private _ySpeed: number;\r\n\r\n\r\n    private _xVelocity: number;\r\n    private _xVelocityJump: number;\r\n    private _yVelocity: number;\r\n    private _friction: number;\r\n    \r\n\r\n    private _lives: number;\r\n    \r\n\r\n    constructor(xPos:number, yPos:number, spriteMap:HTMLImageElement, spritePos:SpritePosition, sourceSize:number, targetSize:number, xVelocity:number, xVelocityJump: number, yVelocity:number, friction:number, lives:number, collision: boolean) {\r\n        super(xPos, yPos, spriteMap, spritePos, sourceSize, targetSize, collision);\r\n        this._xSpeed = 0;\r\n        this._ySpeed = 0;\r\n\r\n        this._xVelocity = xVelocity;\r\n        this._xVelocityJump = xVelocityJump;\r\n        this._yVelocity = yVelocity;\r\n        this._friction = friction;\r\n\r\n        this._lives = lives;\r\n    }\r\n\r\n\r\n    public addLife(){\r\n        this._lives += 1;\r\n    }\r\n\r\n    public takeDamage(){\r\n        this._lives -= 1;\r\n    }\r\n\r\n    public kill(){\r\n        this._lives = 0;\r\n    }\r\n\r\n    public isDead(): boolean {\r\n        return this._lives <= 0;\r\n    }\r\n\r\n    public get xSpeed(): number {\r\n        return this._xSpeed;\r\n    }\r\n    public set xSpeed(value: number) {\r\n        this._xSpeed = value;\r\n    }\r\n\r\n    public get ySpeed(): number {\r\n        return this._ySpeed;\r\n    }\r\n    public set ySpeed(value: number) {\r\n        this._ySpeed = value;\r\n    }\r\n\r\n    protected get xVelocity(): number {\r\n        return this._xVelocity;\r\n    }\r\n\r\n    protected get xVelocityJump(): number {\r\n        return this._xVelocityJump;\r\n    }\r\n\r\n    protected get yVelocity(): number {\r\n        return this._yVelocity;\r\n    }\r\n\r\n    protected get friction(): number {\r\n        return this._friction;\r\n    }\r\n    protected set friction(value: number) {\r\n        this._friction = value;\r\n    }\r\n\r\n    public get lives(): number {\r\n        return this._lives;\r\n    }\r\n    public set lives(value: number) {\r\n        this._lives = value;\r\n    }\r\n\r\n}","import Character from './Character';\r\nimport SpritePosition from '../../SpritePosition';\r\nimport ICollisionObject from '../../Collision/ICollisionObject';\r\nimport Map from '../../Map/Map';\r\n\r\nexport default class Npc extends Character implements ICollisionObject{\r\n\r\n    private _speedLimitY: number;\r\n\r\n    // eslint-disable-next-line\r\n    constructor(xPos:number, yPos:number, spriteMap:HTMLImageElement, spritePos:SpritePosition, sourceSize:number, targetSize:number, xVelocity:number, xVelocityJump: number, yVelocity:number, speedLimitY:number, friction:number, lives:number, collision: boolean) {\r\n        super(xPos, yPos, spriteMap, spritePos, sourceSize, targetSize, xVelocity, xVelocityJump, yVelocity, friction, lives, collision);\r\n        this._speedLimitY = speedLimitY;\r\n    }\r\n\r\n    public fellOutOfMap(){\r\n        this.kill();\r\n    }\r\n\r\n    public animate(ticks: number){}\r\n\r\n    public move(map: Map){}\r\n\r\n    public applyGravity(gravity:number){}\r\n\r\n    public switchDirection(){}\r\n\r\n    public handleLevelEdgeCollision(map: Map){\r\n        if (this.xPos < 0) {\r\n            this.xPos = 0;\r\n            this.switchDirection();\r\n        }\r\n        else if (this.xPos + this.targetSize > map.mapWidth) {\r\n            this.xPos = map.mapWidth - this.targetSize;\r\n            this.switchDirection();\r\n        }\r\n    }\r\n\r\n    protected get speedLimitY(): number {\r\n        return this._speedLimitY;\r\n    }\r\n    protected set speedLimitY(value: number) {\r\n        this._speedLimitY = value;\r\n    }\r\n\r\n}","import Npc from './Npc';\r\nimport profSpriteImage from '../../images/profSprite.jpg';\r\nimport SpritePosition from '../../SpritePosition';\r\nimport MapTile from '../../Map/MapTile';\r\nimport Map from '../../Map/Map';\r\n\r\nexport default class Prof extends Npc {\r\n    \r\n    private movingRight:boolean;\r\n    private movingLeft:boolean;\r\n\r\n    constructor(xPos:number, yPos:number) {\r\n\r\n        let spriteMap = new Image();\r\n        spriteMap.src = profSpriteImage;\r\n        let spritePos = new SpritePosition(0,0);\r\n        let sourceSize = 32;\r\n        let targetSize = 32;\r\n        let xVelocity = 2;\r\n        let xVelocityJump = 1;\r\n        let yVelocity = 25;\r\n        let speedLimitY = 25;\r\n        let friction = 0.4;\r\n        let lives = 1;\r\n        let collision = true;\r\n        super(xPos, yPos, spriteMap, spritePos, sourceSize, targetSize, xVelocity, xVelocityJump, yVelocity,speedLimitY, friction, lives, collision);\r\n        this.xSpeed = 4;\r\n        this.movingLeft = true;\r\n        this.movingRight = !this.movingLeft;\r\n    }\r\n\r\n    public animate(ticks: number) {\r\n        if (ticks % 4 === 0) {\r\n            switch (this.spritePos.tileX) {\r\n                case 0:\r\n                    this.spritePos.tileX = 1;\r\n                    break;\r\n                case 1:\r\n                    this.spritePos.tileX = 2;\r\n                    break;\r\n                case 2:\r\n                    this.spritePos.tileX = 3;\r\n                    break;\r\n                case 3:\r\n                    this.spritePos.tileX = 0;\r\n                    break;\r\n                default:\r\n                    this.spritePos.tileX = 0;\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    public move(map: Map){\r\n        \r\n        if(this.movingLeft){\r\n            this.moveLeft(map);\r\n        }\r\n        else if(this.movingRight){\r\n            this.moveRight(map);\r\n        }\r\n\r\n    }\r\n\r\n    private moveLeft(map: Map){\r\n        let mapTileToBotLeft = map.getMapTileAtXY(this.xPos, this.yPos + this.targetSize);\r\n        if (mapTileToBotLeft && (!mapTileToBotLeft.solid || mapTileToBotLeft.hurtful)){\r\n            this.switchDirection();\r\n        }\r\n        else{\r\n            this.xPos -= this.xSpeed;\r\n        }\r\n    }\r\n\r\n    private moveRight(map: Map){\r\n        let mapTileToBotRight = map.getMapTileAtXY(this.xPos + this.targetSize, this.yPos + this.targetSize);\r\n\r\n        if (mapTileToBotRight && (!mapTileToBotRight.solid || mapTileToBotRight.hurtful)){\r\n            this.switchDirection();\r\n            \r\n        }\r\n        else{\r\n            this.xPos += this.xSpeed;\r\n        }\r\n    }\r\n\r\n    public switchDirection(){\r\n        this.movingLeft = !this.movingLeft;\r\n        this.movingRight = !this.movingRight;\r\n    }\r\n\r\n    public applyGravity(gravity:number){\r\n        this.ySpeed = (this.ySpeed+gravity > this.speedLimitY) ? this.speedLimitY : this.ySpeed+gravity;\r\n        this.yPos += this.ySpeed;\r\n    }\r\n\r\n\r\n}","import { MapTileType } from './MapTileType';\r\nimport SpritePosition from '../SpritePosition';\r\nimport ICollisionObject from '../Collision/ICollisionObject';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nexport default class MapTile implements ICollisionObject{\r\n    private _id: string;\r\n\r\n    private _xPos: number;\r\n    private _yPos: number;\r\n\r\n\r\n    private _xPosCanvas: number;\r\n    private _yPosCanvas: number;\r\n\r\n    private _spritePos: SpritePosition;\r\n    \r\n    private _collision: boolean;\r\n    \r\n    private _solid: boolean;\r\n    \r\n    private _hurtful: boolean;\r\n    \r\n    private _type: MapTileType;\r\n\r\n    private _friction: number = 0.8;\r\n        \r\n\r\n    private static _sourceSize: number = 16;\r\n    private static _targetSize: number = 32;\r\n\r\n    private _targetSize: number;\r\n    \r\n\r\n    constructor(spritePos: SpritePosition, collision: boolean, solid: boolean, hurtful: boolean, type: MapTileType) {\r\n        this._xPos = 0;\r\n        this._yPos = 0;\r\n        this._xPosCanvas = 0;\r\n        this._yPosCanvas = 0;\r\n        this._spritePos = spritePos;\r\n        this._collision = collision;\r\n        this._solid = solid;\r\n        this._hurtful = hurtful;\r\n        this._type = type;\r\n        this._targetSize = MapTile.targetSize;\r\n        this.setFriction();\r\n        this._id = uuidv4();\r\n    }\r\n\r\n    cloneTile(): MapTile{\r\n        let newMapTile = new MapTile(new SpritePosition(this.spritePos.tileX, this.spritePos.tileY), this.collision, this.solid, this.hurtful, this.type);\r\n        newMapTile.xPos = this._xPos;\r\n        newMapTile.yPos = this._yPos;\r\n        newMapTile.xPosCanvas = this._xPosCanvas;\r\n        newMapTile.yPosCanvas = this._yPosCanvas;\r\n        return newMapTile;\r\n    };\r\n\r\n    public get id(): string {\r\n        return this._id;\r\n    }\r\n\r\n    public get xPos(): number {\r\n        return this._xPos;\r\n    }\r\n    public set xPos(value: number) {\r\n        this._xPos = value;\r\n    }\r\n\r\n    public get yPos(): number {\r\n        return this._yPos;\r\n    }\r\n    public set yPos(value: number) {\r\n        this._yPos = value;\r\n    }\r\n\r\n\r\n    public get xPosCanvas(): number {\r\n        return this._xPosCanvas;\r\n    }\r\n    public set xPosCanvas(value: number) {\r\n        this._xPosCanvas = value;\r\n    }\r\n\r\n    public get yPosCanvas(): number {\r\n        return this._yPosCanvas;\r\n    }\r\n    public set yPosCanvas(value: number) {\r\n        this._yPosCanvas = value;\r\n    }\r\n\r\n    public get spritePos(): SpritePosition {\r\n        return this._spritePos;\r\n    }\r\n    public set spritePos(value: SpritePosition) {\r\n        this._spritePos = value;\r\n    }\r\n\r\n    public get collision(): boolean {\r\n        return this._collision;\r\n    }\r\n    public set collision(value: boolean) {\r\n        this._collision = value;\r\n    }\r\n\r\n    public get solid(): boolean {\r\n        return this._solid;\r\n    }\r\n    public set solid(value: boolean) {\r\n        this._solid = value;\r\n    }\r\n\r\n    public get hurtful(): boolean {\r\n        return this._hurtful;\r\n    }\r\n    public set hurtful(value: boolean) {\r\n        this._hurtful = value;\r\n    }\r\n\r\n    public get type(): MapTileType {\r\n        return this._type;\r\n    }\r\n    public set type(value: MapTileType) {\r\n        this._type = value;\r\n    }\r\n\r\n    public static get sourceSize(): number {\r\n        return MapTile._sourceSize;\r\n    }\r\n\r\n    public static get targetSize(): number {\r\n        return MapTile._targetSize;\r\n    }\r\n\r\n    public get targetSize(): number {\r\n        return this._targetSize;\r\n    }\r\n\r\n    public get friction(): number {\r\n        return this._friction;\r\n    }\r\n\r\n    private setFriction(){\r\n        switch (this._type) {\r\n            case MapTileType.ICE:\r\n                this._friction = 0.95;\r\n                break;\r\n            default:\r\n                this._friction = 0.9;\r\n                break;\r\n        }\r\n    }\r\n\r\n}","import MapTile from \"./MapTile\";\r\nimport { MapTileType } from \"./MapTileType\";\r\nimport mapTileImage from \"../images/mapTileImage.jpg\";\r\nimport SpritePosition from \"../SpritePosition\";\r\nimport Config from \"../Config\";\r\n\r\nexport default class Map {\r\n\r\n    private _mapTiles: MapTile[][];\r\n    private _spriteMap: HTMLImageElement;\r\n    private _numberOfDisplayedTilesWidth: number;\r\n    private _numberOfDisplayTilesHeight: number;\r\n    private _mapWidth: number;\r\n    private _mapHeight: number;\r\n   \r\n\r\n    constructor(template: string[]) {\r\n\r\n        this._mapTiles = this.generateMapTiles(template);\r\n        this._spriteMap = new Image();\r\n        this._spriteMap.src = mapTileImage;\r\n\r\n        this._numberOfDisplayedTilesWidth = Config.canvasSize.w / MapTile.targetSize; \r\n        this._numberOfDisplayTilesHeight = Config.canvasSize.h / MapTile.targetSize;\r\n\r\n        this._mapWidth = MapTile.targetSize * this._mapTiles[0].length;\r\n        this._mapHeight = MapTile.targetSize * this._mapTiles.length;\r\n    }\r\n\r\n    private generateMapTiles(template: string[]){\r\n        let mapTiles: MapTile[][] = [];\r\n        template.forEach((layer, layerIndex) => {\r\n            let currentLayerTiles: MapTile[] = [];\r\n            for(let tileIndex=0; tileIndex < layer.length; tileIndex++){\r\n                let newTileIndex = currentLayerTiles.push(Map.tiles[layer[tileIndex]].cloneTile())-1;\r\n                currentLayerTiles[newTileIndex].xPos = tileIndex*MapTile.targetSize;\r\n                currentLayerTiles[newTileIndex].yPos = layerIndex*MapTile.targetSize;\r\n            }\r\n            mapTiles.push(currentLayerTiles);\r\n        });\r\n        return mapTiles;\r\n    }\r\n\r\n    public getGroundLevel(): number{\r\n        return this.mapHeight - MapTile.targetSize*2; //second last tile on y axis\r\n    }\r\n\r\n    private static tiles: { [id: string]: MapTile } = {\r\n        ' ' : new MapTile(new SpritePosition(0,0),false,false,false, MapTileType.DEFAULT),\r\n        '#' : new MapTile(new SpritePosition(1,0),true,true,false, MapTileType.DEFAULT),\r\n    }\r\n\r\n    public getMapTileAtXY(x:number, y:number): MapTile{\r\n        let xTileIndex = Math.trunc(x / MapTile.targetSize);\r\n        let yTileIndex = Math.trunc(y / MapTile.targetSize);\r\n\r\n        return this.mapTiles[yTileIndex][xTileIndex];\r\n    }\r\n\r\n    public get mapTiles(): MapTile[][] {\r\n        return this._mapTiles;\r\n    }\r\n    public set mapTiles(value: MapTile[][]) {\r\n        this._mapTiles = value;\r\n    }\r\n\r\n    public get spriteMap(): HTMLImageElement {\r\n        return this._spriteMap;\r\n    }\r\n    public set spriteMap(value: HTMLImageElement) {\r\n        this._spriteMap = value;\r\n    }\r\n\r\n    public get numberOfDisplayedTilesWidth(): number {\r\n        return this._numberOfDisplayedTilesWidth;\r\n    }\r\n\r\n    public get mapWidth(): number {\r\n        return this._mapWidth;\r\n    }\r\n    public get mapHeight(): number {\r\n        return this._mapHeight;\r\n    }\r\n\r\n}","import Level from './Level';\r\nimport Ects from '../Entities/items/Ects';\r\nimport Prof from '../Entities/characters/Prof';\r\nimport Map from '../Map/Map';\r\nimport MapTile from '../Map/MapTile';\r\n\r\nclass Levels {\r\n\r\n    static levels: Level[] = [\r\n\r\n        new Level(\"1\", \"grey\", new Map([\r\n            \"                                  \",\r\n            \"                                  \",\r\n            \"                                  \",\r\n            \"                                  \",\r\n            \"                                  \",\r\n            \"                  #######         \",\r\n            \"                                  \",\r\n            \"                                  \",\r\n            \"##################################\",\r\n        ]),\r\n        [\r\n            new Prof( Levels.getCoordinateForRelativeMapPos(20), Levels.getCoordinateForRelativeMapPos(4) )\r\n        ],\r\n        [\r\n            new Ects( Levels.getCoordinateForRelativeMapPos(10), Levels.getCoordinateForRelativeMapPos(1) )\r\n        ],\r\n        ),\r\n\r\n        new Level(\"2\", \"grey\", new Map([\r\n            \"\",\r\n            \"\",\r\n            \"\",\r\n        ]),\r\n        [new Prof(0, 0)],\r\n        [new Ects(0, 0)],\r\n        )\r\n\r\n    ];\r\n\r\n    private static getCoordinateForRelativeMapPos(relativeMapPos: number): number{\r\n        return MapTile.targetSize * relativeMapPos;\r\n    }\r\n\r\n}\r\n\r\nexport default Levels;","import Entity from \"../Entity\";\r\nimport SpritePosition from \"../../SpritePosition\";\r\nimport projectileSpriteImage from '../../images/projectileSpriteImage.jpg';\r\n\r\nexport default class Projectile extends Entity{\r\n    private _hasCollided: boolean;\r\n    private _xSpeed: number;\r\n    \r\n    // eslint-disable-next-line\r\n    constructor(xPos:number, yPos:number, _directionRight: boolean) {\r\n        let spriteMap = new Image();\r\n        spriteMap.src = projectileSpriteImage;\r\n        let spritePos = new SpritePosition(0,0);\r\n        let sourceSize = 16;\r\n        let targetSize = 32;\r\n        let collision = true; \r\n        super(xPos, yPos, spriteMap, spritePos, sourceSize, targetSize, collision);\r\n        this._xSpeed = _directionRight ? 15 : -15;\r\n        this._hasCollided = false;\r\n    }\r\n\r\n\r\n    public get hasCollided(): boolean {\r\n        return this._hasCollided;\r\n    }\r\n    public set hasCollided(value: boolean) {\r\n        this._hasCollided = value;\r\n    }\r\n\r\n    public updatePos(xPos: number, yPos: number){\r\n        this.xPos = xPos;\r\n        this.yPos = yPos;\r\n    }\r\n\r\n    public animate(ticks:number){}\r\n\r\n    public move(){\r\n        this.xPos += this._xSpeed;\r\n    }\r\n\r\n    public handleLevelEdgeCollision(){\r\n        this._hasCollided = true;\r\n    }\r\n\r\n    public fellOutOfMap(){\r\n        this._hasCollided = true;\r\n    }\r\n\r\n\r\n}","import Character from './Character';\r\nimport playerSpriteImage from '../../images/playerSprite.jpg';\r\nimport SpritePosition from '../../SpritePosition';\r\nimport Map from '../../Map/Map';\r\nimport Projectile from '../projectiles/Projectile';\r\n\r\nexport default class Player extends Character {\r\n\r\n    private _speedLimitX: number;\r\n    private _speedLimitY: number;\r\n    private _tookDamage: boolean;\r\n    private _ects: number;\r\n    private _facingRight: boolean;\r\n\r\n    \r\n    constructor(xPos:number, yPos:number) {\r\n        let spriteMap = new Image();\r\n        spriteMap.src = playerSpriteImage;\r\n        let spritePos = new SpritePosition(0,0);\r\n        let sourceSize = 32;\r\n        let targetSize = 42;\r\n        let xVelocity = 2;\r\n        let xVelocityJump = 2;\r\n        let yVelocity = 25;\r\n        let friction = 0.9;\r\n        let lives = 3;\r\n        let collision = true;\r\n        super(xPos, yPos, spriteMap, spritePos, sourceSize, targetSize, xVelocity, xVelocityJump, yVelocity, friction, lives, collision);\r\n        this._speedLimitX = 12;\r\n        this._speedLimitY = 25;\r\n        this._tookDamage = false;\r\n        this._ects = 0;\r\n        this._facingRight = true;\r\n    }\r\n\r\n\r\n    public accelerateRight(){\r\n        \r\n        if(this.xSpeed < this._speedLimitX){\r\n            if(this.ySpeed === 0){\r\n                this.xSpeed += this.xVelocity * this.friction;\r\n            } else {\r\n                this.xSpeed += this.xVelocityJump * this.friction;\r\n            }\r\n        }\r\n        this._facingRight = (this.xSpeed > 0);\r\n    }\r\n\r\n    public accelerateLeft(){\r\n\r\n        if(this.xSpeed > -this._speedLimitX){\r\n            if(this.ySpeed === 0){\r\n                this.xSpeed -= this.xVelocity * this.friction;\r\n            } else {\r\n                this.xSpeed -= this.xVelocityJump * this.friction;\r\n            }\r\n        }\r\n        this._facingRight = (this.xSpeed > 0);\r\n    }\r\n\r\n    public jump(){\r\n\r\n        if(this.ySpeed === 0){\r\n            this.ySpeed -= this.yVelocity; // - because y 0 is on top of canvas so -y means upwards\r\n        }\r\n\r\n    }\r\n\r\n    public smallJump(){\r\n        if(this.ySpeed === 0){\r\n            this.ySpeed -= this.yVelocity/2; // - because y 0 is on top of canvas so -y means upwards\r\n        }\r\n    }\r\n\r\n    public bigJump(){\r\n        if(this.ySpeed === 0){\r\n            this.ySpeed -= this.yVelocity*2; // - because y 0 is on top of canvas so -y means upwards\r\n        }\r\n    }\r\n\r\n    public animate(ticks: number) {\r\n        if (ticks % 4 === 0 && (this.xSpeed !== 0 || this.ySpeed !== 0)) {\r\n            switch (this.spritePos.tileX) {\r\n                case 0:\r\n                    this.spritePos.tileX = 1;\r\n                    break;\r\n                case 1:\r\n                    this.spritePos.tileX = 2;\r\n                    break;\r\n                case 2:\r\n                    this.spritePos.tileX = 3;\r\n                    break;\r\n                case 3:\r\n                    this.spritePos.tileX = 0;\r\n                    break;\r\n                default:\r\n                    this.spritePos.tileX = 0;\r\n                    break;\r\n            }\r\n        }\r\n        else{\r\n            this.spritePos.tileX = 0;\r\n        }\r\n    }\r\n\r\n    public applyGravity(gravity:number){\r\n\r\n        this.ySpeed = (this.ySpeed+gravity > this.speedLimitY) ? this.speedLimitY : this.ySpeed+gravity;\r\n\r\n    }\r\n\r\n    public updatePos(){\r\n        this.xPos += this.xSpeed;\r\n        this.yPos += this.ySpeed;\r\n    }\r\n\r\n    public resetPlayer() {\r\n        this.lives = 3;\r\n        this._tookDamage = false;\r\n    }\r\n\r\n    public fellOutOfMap(){\r\n        this.takeDamage();\r\n    }\r\n\r\n    public takeDamage(){\r\n        super.takeDamage()\r\n        this._tookDamage = true;\r\n    }\r\n\r\n    public handleLevelEdgeCollision(map: Map){\r\n        if (this.xPos < 0) {\r\n            this.xPos = 0;\r\n            this.xSpeed = 0;\r\n        }\r\n        else if (this.xPos + this.targetSize > map.mapWidth) {\r\n            this.xPos = map.mapWidth - this.targetSize;\r\n            this.xSpeed = 0;\r\n        }\r\n    }\r\n\r\n    public shoot(): Projectile{\r\n        //TODO: limit shooting number of projectiles\r\n        \r\n        if(this._facingRight){\r\n            let projectile = new Projectile(0, 0, true);\r\n            projectile.updatePos(this.xPos+this.targetSize, this.yPos);\r\n            return projectile;\r\n        }else{\r\n            let projectile = new Projectile(0, 0, false);\r\n            projectile.updatePos(this.xPos-projectile.targetSize, this.yPos);\r\n            return projectile;\r\n        }\r\n    }\r\n\r\n    public get speedLimitY(): number {\r\n        return this._speedLimitY;\r\n    }\r\n    public set speedLimitY(value: number) {\r\n        this._speedLimitY = value;\r\n    }\r\n    public get tookDamage(): boolean {\r\n        return this._tookDamage;\r\n    }\r\n    public set tookDamage(value: boolean) {\r\n        this._tookDamage = value;\r\n    }\r\n\r\n    public get ects(): number {\r\n        return this._ects;\r\n    }\r\n\r\n    public addEcts() {\r\n        this._ects++;\r\n    }\r\n\r\n}","export default class Collision{\r\n\r\n    private _top: boolean;\r\n    private _bot: boolean;\r\n    private _right: boolean;\r\n    private _left: boolean;\r\n    \r\n    constructor()\r\n    constructor(top?:boolean,bot?:boolean,left?:boolean,right?:boolean){\r\n        this._top = top || false;\r\n        this._bot = bot || false;\r\n        this._right = right || false;\r\n        this._left = left || false;\r\n    }\r\n\r\n    public doesCollide(): boolean{\r\n        return this._top || this._bot || this._right || this._left;\r\n    }\r\n\r\n    public get top(): boolean {\r\n        return this._top;\r\n    }\r\n    public set top(value: boolean) {\r\n        this._top = value;\r\n    }\r\n\r\n    public get bot(): boolean {\r\n        return this._bot;\r\n    }\r\n    public set bot(value: boolean) {\r\n        this._bot = value;\r\n    }\r\n\r\n    public get right(): boolean {\r\n        return this._right;\r\n    }\r\n    public set right(value: boolean) {\r\n        this._right = value;\r\n    }\r\n\r\n    public get left(): boolean {\r\n        return this._left;\r\n    }\r\n    public set left(value: boolean) {\r\n        this._left = value;\r\n    }\r\n    \r\n\r\n}","import ICollisionObject from \"./ICollisionObject\";\r\nimport Collision from \"./Collision\";\r\nimport Player from \"../Entities/characters/Player\";\r\nimport Npc from \"../Entities/characters/Npc\";\r\nimport MapTile from \"../Map/MapTile\";\r\nimport { MapTileType } from \"../Map/MapTileType\";\r\nimport Item from \"../Entities/items/Item\";\r\nimport SpecialCollisionEvents from \"./SpecialCollisionEvents\";\r\nimport Ects from \"../Entities/items/Ects\";\r\n\r\nexport default class CollisionMap{\r\n\r\n    private _collisionObjects: ICollisionObject[];\r\n    \r\n    constructor()\r\n    constructor(collisionObjects?: ICollisionObject[]){\r\n        this._collisionObjects = collisionObjects || [];\r\n    }\r\n\r\n    public get collisionObjects(): ICollisionObject[] {\r\n        return this._collisionObjects;\r\n    }\r\n    public set collisionObjects(value: ICollisionObject[]) {\r\n        this._collisionObjects = value;\r\n    }\r\n\r\n    public static checkCollision(obj1: ICollisionObject, obj2: ICollisionObject) : Collision {\r\n\r\n        let collision = new Collision();\r\n\r\n        let obj1MiddleX = obj1.xPos + obj1.targetSize/2;\r\n        let obj1MiddleY = obj1.yPos + obj1.targetSize/2;\r\n        let obj1RightX = obj1.xPos + obj1.targetSize;\r\n        let obj1BotY = obj1.yPos + obj1.targetSize;\r\n        let obj2RightX = obj2.xPos + obj2.targetSize;\r\n        let obj2BotY = obj2.yPos + obj2.targetSize;\r\n\r\n        // TODO use depth collision check\r\n        //below or above object\r\n        if(this.inRange(obj1MiddleX, obj2.xPos - 0.25 * obj2.targetSize, obj2.xPos + 1.25 * obj2.targetSize)){\r\n            \r\n            if(this.inRange(obj1BotY, obj2.yPos, obj2BotY) && obj1.yPos < obj2.yPos){\r\n                collision.bot = true;\r\n            }\r\n            else if(this.inRange(obj1.yPos, obj2.yPos, obj2BotY)){\r\n                collision.top = true;\r\n            }\r\n        }\r\n        \r\n        // TODO use depth collision check\r\n        //right or left of object\r\n        if(this.inRange(obj1MiddleY, obj2.yPos - 0.25 * obj2.targetSize, obj2.yPos + 1.25 * obj2.targetSize)){\r\n\r\n            if (this.inRange(obj1RightX, obj2.xPos, obj2RightX)) {\r\n                collision.right = true;\r\n            }\r\n            if (this.inRange(obj1.xPos, obj2.xPos, obj2RightX)) {\r\n                collision.left = true;\r\n            }\r\n        }\r\n\r\n        return collision;\r\n\r\n    }\r\n\r\n    public static processPlayerNpcCollision(player: Player, npc: Npc, collides: Collision){\r\n\r\n        if (collides.bot) {\r\n            player.yPos = npc.yPos - player.targetSize;\r\n            player.ySpeed = 0;\r\n            npc.takeDamage();\r\n            player.smallJump();\r\n        }\r\n        else if (collides.top || collides.right || collides.left) {\r\n            player.takeDamage();\r\n        }\r\n\r\n    }\r\n\r\n    public static processPlayerMapTileCollision(player: Player, mapTile: MapTile, collides: Collision, specialCollisionEvents: SpecialCollisionEvents){\r\n        \r\n        if (mapTile.solid) {\r\n            if (collides.top) {\r\n                player.yPos = mapTile.yPos + mapTile.targetSize;\r\n                player.ySpeed = 1;\r\n            }\r\n            else if (collides.bot) {\r\n                player.yPos = mapTile.yPos - player.targetSize;\r\n                player.ySpeed = 0;\r\n                player.xSpeed *= mapTile.friction;\r\n            } else if (collides.right) {\r\n                player.xPos = mapTile.xPos - player.targetSize;\r\n                player.xSpeed = 0;\r\n            } else if (collides.left) {\r\n                player.xPos = mapTile.xPos + mapTile.targetSize;\r\n                player.xSpeed = 0;\r\n            }\r\n        }\r\n\r\n        \r\n        switch (mapTile.type) {\r\n            case MapTileType.HURTFUL:\r\n                player.takeDamage();\r\n                break;\r\n\r\n            case MapTileType.TRAMPOLINE:\r\n                player.bigJump();\r\n                break;\r\n\r\n            case MapTileType.EXIT:\r\n                specialCollisionEvents.levelEnd = true;\r\n                break;\r\n            \r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    public static processEnemyMapTileCollision(enemy: Npc, mapTile: MapTile, collides: Collision){\r\n        if (mapTile.solid) {\r\n            if (collides.top) {\r\n                enemy.yPos = mapTile.yPos + mapTile.targetSize;\r\n                enemy.ySpeed = 1;\r\n            }\r\n            else if (collides.bot) {\r\n                enemy.yPos = mapTile.yPos - enemy.targetSize;\r\n                enemy.ySpeed = 0;\r\n            } else if (collides.right) {\r\n                enemy.xPos = mapTile.xPos - enemy.targetSize;\r\n                enemy.switchDirection();\r\n            } else if (collides.left) {\r\n                enemy.xPos = mapTile.xPos + mapTile.targetSize;\r\n                enemy.switchDirection();\r\n            }\r\n        }\r\n\r\n        \r\n        switch (mapTile.type) {\r\n            case MapTileType.HURTFUL:\r\n                enemy.takeDamage();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    public static processPlayerItemCollision(player: Player, item: Item, collides: Collision){\r\n        if(item instanceof Ects){\r\n            player.addEcts();\r\n            item.isCollected = true;\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    private static inRange(x:number, min:number, max:number): boolean{\r\n        return x >= min && x <= max;\r\n    }\r\n\r\n}","export default class SpecialCollisionEvents {\r\n    public levelEnd: boolean = false;\r\n}\r\n","import React from 'react';\r\nimport './Gamecanvas.css';\r\nimport gamesketchimg from './images/gamesketchimg.jpg';\r\nimport Controls from './Controls';\r\nimport Config from './Config';\r\nimport Levels from './Levels/Levels';\r\nimport Level from './Levels/Level';\r\nimport MapTile from './Map/MapTile';\r\nimport Player from './Entities/characters/Player';\r\nimport Character from './Entities/characters/Character';\r\nimport Item from './Entities/items/Item';\r\nimport CollisionMap from './Collision/CollisionMap';\r\nimport Npc from './Entities/characters/Npc';\r\nimport SpecialCollisionEvents from './Collision/SpecialCollisionEvents';\r\nimport Ects from './Entities/items/Ects';\r\nimport Entity from './Entities/Entity';\r\nimport Projectile from './Entities/projectiles/Projectile';\r\nclass Canvas extends React.Component {\r\n\r\n    private gameCanvasRef: any;\r\n    private gameSketchImgRef: any;\r\n    private ctx: any;\r\n\r\n    private ticks: number = 0;\r\n\r\n    private currentLevel: Level = Levels.levels[0];\r\n    // current map position\r\n    private levelPosX: number = 0;\r\n\r\n    private collisionMap: CollisionMap = new CollisionMap();\r\n\r\n    private player: Player = new Player(0, 0);\r\n    private characters: Character[] = [];\r\n\r\n    private projectiles: Projectile[] = [];\r\n\r\n    private currentEctsScore = 0;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.gameCanvasRef = React.createRef();\r\n        this.gameSketchImgRef = React.createRef();\r\n\r\n        this.gameLoop = this.gameLoop.bind(this);\r\n\r\n        this.startGame();\r\n    }\r\n\r\n    componentDidMount() {\r\n        const canvas = this.gameCanvasRef.current;\r\n        this.ctx = canvas.getContext(\"2d\");\r\n        const img = this.gameSketchImgRef.current;\r\n\r\n        if(this.ctx != null && img != null && img.currentSrc != null){\r\n            img.onload = () => {\r\n                this.ctx.drawImage(img, 0, 0, img.width, img.height, 0, 0, canvas.width, canvas.height);\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div>\r\n                <canvas ref={this.gameCanvasRef} width={Config.canvasSize.w} height={Config.canvasSize.h} />\r\n                <img ref={this.gameSketchImgRef} src={gamesketchimg} className=\"hidden\" alt=\"gameSketchImg\"/>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    startGame() {\r\n        //hideMenus();\r\n        Controls.registerKeyEvents()\r\n        this.initializeLevel();\r\n        window.clearInterval(Config.gameInterval);\r\n        Config.gameInterval = setInterval(this.gameLoop, 1000 / Config.fps);\r\n    }\r\n\r\n    gameLoop() {\r\n        this.ticks++;\r\n        this.characters = this.currentLevel.enemies.slice();\r\n        this.characters.push(this.player);\r\n\r\n        this.drawLevel();\r\n\r\n        this.updatePlayer();\r\n        this.updateNpc();\r\n        this.updateItems();\r\n        this.updateProjectiles();\r\n\r\n        this.drawEntities(this.currentLevel.items);\r\n        this.drawEntities(this.characters);\r\n        this.drawEntities(this.projectiles);\r\n        this.drawUI();\r\n        this.drawControls();\r\n\r\n        if (this.player.tookDamage) { this.respawnPlayer() }\r\n        if (this.player.isDead()){ this.gameOver() };\r\n    }\r\n\r\n\r\n    initializeLevel(){\r\n        this.collisionMap.collisionObjects = [];\r\n        this.player.resetPlayer();\r\n        this.respawnPlayer()\r\n        this.levelPosX = 0;\r\n        this.characters = this.currentLevel.enemies.slice();\r\n        this.characters.push(this.player);\r\n\r\n        this.collisionMap.collisionObjects = this.collisionMap.collisionObjects.concat(this.currentLevel.enemies);\r\n        this.collisionMap.collisionObjects = this.collisionMap.collisionObjects.concat(this.currentLevel.items);\r\n        this.collisionMap.collisionObjects = this.collisionMap.collisionObjects.concat(this.currentLevel.map.mapTiles.flat().filter(mapTile => mapTile.collision));\r\n        console.log(this.collisionMap.collisionObjects);\r\n    }\r\n\r\n    public respawnPlayer(){\r\n        this.player.xPos = 0;\r\n        this.player.yPos = this.currentLevel.map.getGroundLevel()-10;\r\n        this.player.xSpeed = 0;\r\n        this.player.ySpeed = 0;\r\n        this.player.tookDamage = false;\r\n        this.levelPosX = 0;\r\n    }\r\n\r\n\r\n    drawLevel() {\r\n\r\n        this.ctx.clearRect(0, 0, Config.canvasSize.w, Config.canvasSize.h);\r\n        if (this.levelPosX < 0) {\r\n            this.levelPosX = 0;\r\n        }\r\n        // first tile to display:\r\n        let indexFirstTile = Math.trunc(this.levelPosX / MapTile.targetSize);\r\n        let offset_x = this.levelPosX % MapTile.targetSize;\r\n\r\n        // last tile to show\r\n        let indexLastTile = indexFirstTile + this.currentLevel.map.numberOfDisplayedTilesWidth;\r\n    \r\n        let currentLevelMapTiles = this.currentLevel.map.mapTiles;\r\n\r\n        currentLevelMapTiles.forEach((mapTileLayer, index) => {\r\n            this.drawLayer(mapTileLayer, index, indexFirstTile, indexLastTile, offset_x);\r\n        });\r\n        \r\n    }\r\n\r\n    drawLayer(mapTileLayer: MapTile[], currentLayerIndex: number, indexFirstTile: number, indexLastTile: number, offset_x: number) {\r\n        for (let indexCurrentTile = indexFirstTile; indexCurrentTile < indexLastTile; indexCurrentTile++) {\r\n\r\n            let mapTile = mapTileLayer[indexCurrentTile];\r\n            \r\n            if(mapTile){ //if map template smaller than canvas width map tiles not defined -> TODO refactor\r\n                mapTile.xPosCanvas = indexCurrentTile * MapTile.targetSize - offset_x;\r\n                mapTile.yPosCanvas = currentLayerIndex * MapTile.targetSize;\r\n                this.ctx.drawImage(this.currentLevel.map.spriteMap,\r\n                    mapTile.spritePos.getXPosForSpriteWidth(MapTile.sourceSize + 1),\r\n                    mapTile.spritePos.getYPosForSpriteHeight(MapTile.sourceSize + 1),\r\n                    MapTile.sourceSize - 0.8,\r\n                    MapTile.sourceSize - 0.8,\r\n                    mapTile.xPosCanvas - (indexFirstTile * MapTile.targetSize),\r\n                    mapTile.yPosCanvas,\r\n                    MapTile.targetSize,\r\n                    MapTile.targetSize\r\n                );\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    drawEntities(entities: Entity[]){\r\n        entities.forEach(entity => {\r\n            this.ctx.drawImage(\r\n                entity.spriteMap,\r\n                entity.spritePos.getXPosForSpriteWidth(entity.sourceSize),\r\n                entity.spritePos.getYPosForSpriteHeight(entity.sourceSize),\r\n                entity.sourceSize,\r\n                entity.sourceSize,\r\n                entity.xPos - this.levelPosX,\r\n                entity.yPos,\r\n                entity.targetSize,\r\n                entity.targetSize\r\n            );\r\n        });\r\n    }\r\n    \r\n\r\n    updatePlayer(){\r\n\r\n        if(Controls.heldRight){\r\n            this.player.accelerateRight();\r\n        }\r\n        if (Controls.heldLeft){\r\n            this.player.accelerateLeft();\r\n        }\r\n\r\n        if (Controls.heldUp){\r\n            this.player.jump();\r\n        }\r\n\r\n        if (Controls.heldE){\r\n            this.projectiles.push(this.player.shoot());\r\n        }\r\n\r\n        //make sure x and y speed is 0 if player practically standing still\r\n        if (Math.abs(this.player.xSpeed) < 0.8) this.player.xSpeed = 0;\r\n        if (Math.abs(this.player.ySpeed) < 0.1) this.player.ySpeed = 0;\r\n\r\n        this.player.animate(this.ticks);\r\n\r\n        this.player.applyGravity(Config.gravity);\r\n\r\n        this.player.updatePos();\r\n\r\n\r\n        this.checkLevelEdgeCollision(this.player);\r\n        this.updateMapPosition(this.player);\r\n\r\n        this.checkPlayerCollisions();\r\n\r\n    }\r\n\r\n    updateNpc(){\r\n        \r\n        this.currentLevel.enemies.forEach((enemy, index, object) => {\r\n\r\n            if(enemy.isDead()){\r\n                object.splice(index, 1);\r\n                this.collisionMap.collisionObjects.splice(this.collisionMap.collisionObjects.findIndex(x => x.id === enemy.id), 1);\r\n                return;\r\n            }\r\n\r\n            enemy.animate(this.ticks);\r\n            enemy.move(this.currentLevel.map);\r\n            enemy.applyGravity(Config.gravity);\r\n\r\n            this.checkLevelEdgeCollision(enemy);\r\n            this.checkEnemyCollisions(enemy);\r\n\r\n\r\n        });\r\n\r\n    }\r\n\r\n    updateItems(){\r\n\r\n        this.currentLevel.items.forEach( item => {\r\n            if(item.isCollected){\r\n                if(item instanceof Ects){\r\n                    this.currentEctsScore ++;\r\n                }\r\n            }\r\n            item.animate(this.ticks);\r\n        });\r\n\r\n        this.currentLevel.items = this.currentLevel.items.filter(item => !item.isCollected);\r\n\r\n    }\r\n    \r\n    updateProjectiles(){\r\n        console.log(this.projectiles);\r\n        this.projectiles.forEach((projectile, index, object) => {\r\n\r\n            if(projectile.hasCollided){\r\n                object.splice(index, 1);\r\n                this.collisionMap.collisionObjects.splice(this.collisionMap.collisionObjects.findIndex(x => x.id === projectile.id), 1);\r\n                return;\r\n            }\r\n\r\n            projectile.animate(this.ticks);\r\n            projectile.move();\r\n\r\n            this.checkLevelEdgeCollision(projectile);\r\n            this.checkProjectileCollisions(projectile);\r\n        });\r\n        \r\n    }\r\n\r\n\r\n    checkLevelEdgeCollision(entity: Entity){\r\n        entity.handleLevelEdgeCollision(this.currentLevel.map);\r\n        \r\n        // die on level bottom\r\n        if (entity.yPos > this.currentLevel.map.mapHeight - MapTile.targetSize) {\r\n            entity.fellOutOfMap();\r\n        }\r\n    }\r\n\r\n    updateMapPosition(player: Player){\r\n        // move the player when the level is at it's border, else move the level\r\n        if (this.levelPosX <= 0) {\r\n            if (player.xPos > (Config.canvasSize.w / 2)) {\r\n                this.levelPosX = 1;\r\n            }\r\n        } else if (this.levelPosX >= this.currentLevel.map.mapWidth - Config.canvasSize.w && this.currentLevel.map.mapWidth > Config.canvasSize.w) {\r\n            this.levelPosX = this.currentLevel.map.mapWidth - Config.canvasSize.w;\r\n            if (player.xPos < this.currentLevel.map.mapWidth - (Config.canvasSize.w / 2)) {\r\n                this.levelPosX = this.currentLevel.map.mapWidth - Config.canvasSize.w - 1;\r\n            }\r\n        } else if (this.currentLevel.map.mapWidth > Config.canvasSize.w) {\r\n            this.levelPosX += player.xSpeed;\r\n        }\r\n    }\r\n\r\n    checkPlayerCollisions(){\r\n        this.collisionMap.collisionObjects.forEach(collisionObject => {\r\n            \r\n            let collides = CollisionMap.checkCollision(this.player, collisionObject);\r\n\r\n            if(collides.doesCollide()){\r\n                let specialCollisionEvent = new SpecialCollisionEvents();\r\n\r\n                if (collisionObject instanceof Npc){\r\n                    CollisionMap.processPlayerNpcCollision(this.player, collisionObject as Npc, collides);\r\n                }\r\n                else if (collisionObject instanceof MapTile){\r\n                    CollisionMap.processPlayerMapTileCollision(this.player, collisionObject as MapTile, collides, specialCollisionEvent);\r\n                }\r\n                else if (collisionObject instanceof Item){\r\n                    CollisionMap.processPlayerItemCollision(this.player, collisionObject as Item, collides);\r\n                }\r\n                if(specialCollisionEvent.levelEnd){\r\n                    this.endLevel();\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n    checkEnemyCollisions(enemy: Npc){\r\n        this.collisionMap.collisionObjects.forEach(collisionObject => {\r\n            \r\n            //only check for collision with MapTiles\r\n            if(collisionObject instanceof MapTile){\r\n                let collides = CollisionMap.checkCollision(enemy, collisionObject);\r\n                CollisionMap.processEnemyMapTileCollision(enemy, collisionObject as MapTile, collides);\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n    checkProjectileCollisions(projectile: Projectile){\r\n        this.collisionMap.collisionObjects.forEach(collisionObject => {\r\n            let collides = CollisionMap.checkCollision(projectile, collisionObject);\r\n            if(collides.doesCollide()){\r\n                if(collisionObject instanceof MapTile){\r\n                    projectile.hasCollided = true;\r\n                }else if(collisionObject instanceof Npc){\r\n                    (collisionObject as Npc).takeDamage();\r\n                    projectile.hasCollided = true;\r\n                }\r\n            }\r\n            \r\n            //only check for collision with MapTiles\r\n            \r\n\r\n        });\r\n    }\r\n\r\n    endLevel(){\r\n        //TODO implement\r\n    }\r\n\r\n    gameOver(){\r\n        //TODO implement\r\n    }\r\n\r\n    drawUI(){\r\n        //TODO implement\r\n    }\r\n\r\n    drawControls(){\r\n        //TODO implement\r\n    }\r\n}\r\n\r\nexport default Canvas;","import React from 'react';\r\nimport './App.css';\r\nimport GameCanvas from './game/Gamecanvas';\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <h1>Life of PiBS</h1>\r\n        <GameCanvas/>\r\n      </header>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}