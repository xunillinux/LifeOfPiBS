{"version":3,"sources":["game/images/ectsSprite.jpg","game/images/profSprite.jpg","game/images/mapTileImage.jpg","game/images/playerSprite.jpg","game/images/projectileSpriteImage.jpg","game/Map/MapTileType.tsx","game/Config.tsx","game/SpritePosition.tsx","game/Map/MapTile.tsx","game/Gamecanvas.tsx","game/GameUI.tsx","game/Controls.tsx","game/Levels/Level.tsx","game/Entities/Entity.tsx","game/Entities/items/Item.tsx","game/Entities/items/Ects.tsx","game/Entities/characters/Character.tsx","game/Entities/characters/Npc.tsx","game/Entities/characters/Prof.tsx","game/Map/Map.tsx","game/Levels/Levels.tsx","game/Collision/Collision.tsx","game/Collision/CollisionMap.tsx","game/Entities/projectiles/Projectile.tsx","game/Entities/characters/Player.tsx","game/Collision/SpecialCollisionEvents.tsx","game/Game.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","MapTileType","Config","canvasSize","w","h","gravity","fps","gameInterval","SpritePosition","tileX","tileY","_tileX","_tileY","this","spriteSizeWidth","spriteSizeHeight","value","MapTile","spritePos","collision","solid","hurtful","type","_id","_xPos","_yPos","_xPosCanvas","_yPosCanvas","_spritePos","_collision","_solid","_hurtful","_type","_friction","_targetSize","targetSize","setFriction","uuidv4","newMapTile","xPos","yPos","xPosCanvas","yPosCanvas","ICE","_sourceSize","Canvas","props","gameCanvasRef","gameSketchImgRef","ctx","React","createRef","drawLevel","currentLevel","levelPosX","drawEntities","entities","ref","width","height","canvas","current","getContext","clearRect","indexFirstTile","Math","trunc","offset_x","indexLastTile","map","numberOfDisplayedTilesWidth","mapTiles","forEach","mapTileLayer","index","drawLayer","currentLayerIndex","indexCurrentTile","mapTile","drawImage","spriteMap","getXPosForSpriteWidth","sourceSize","getYPosForSpriteHeight","entity","Component","GameUI","className","Controls","window","onkeydown","e","keyCode","preventDefault","heldLeft","heldUp","heldRight","heldDown","Escape","heldE","onkeyup","Level","name","backgroundColor","enemies","ects","_name","_backgroundColor","_map","_enemies","_items","Entity","_spriteMap","Item","isCollected","_isCollected","ticks","Ects","Image","src","ectsSpriteImage","Character","xVelocity","xVelocityJump","yVelocity","friction","lives","_xSpeed","_ySpeed","_xVelocity","_xVelocityJump","_yVelocity","_lives","Npc","speedLimitY","_speedLimitY","kill","switchDirection","mapWidth","Prof","profSpriteImage","movingRight","movingLeft","xSpeed","moveLeft","moveRight","mapTileToBotLeft","getMapTileAtXY","mapTileToBotRight","ySpeed","Map","template","_mapTiles","_numberOfDisplayedTilesWidth","_numberOfDisplayTilesHeight","_mapWidth","_mapHeight","generateMapTiles","mapTileImage","length","layer","layerIndex","currentLayerTiles","tileIndex","newTileIndex","push","tiles","cloneTile","mapHeight","x","y","xTileIndex","yTileIndex","DEFAULT","Levels","relativeMapPos","levels","getCoordinateForRelativeMapPos","Collision","top","bot","left","right","_top","_bot","_right","_left","CollisionMap","collisionObjects","_collisionObjects","obj1","obj2","obj1MiddleX","obj1MiddleY","obj1RightX","obj1BotY","obj2RightX","obj2BotY","inRange","player","npc","collides","takeDamage","smallJump","specialCollisionEvents","HURTFUL","TRAMPOLINE","bigJump","EXIT","levelEnd","enemy","item","addEcts","min","max","Projectile","_directionRight","projectileSpriteImage","_hasCollided","_range","startXPos","hasCollided","reachedRangeLimit","abs","Player","playerSpriteImage","_speedLimitX","_tookDamage","_ects","_facingRight","_shootCooldown","_shootCooldownTime","canShoot","projectile","updatePos","SpecialCollisionEvents","Game","currentEctsScore","characters","projectiles","collisionMap","state","gameLoop","bind","startGame","registerKeyEvents","initializeLevel","clearInterval","setInterval","level","resetPlayer","respawnPlayer","slice","concat","items","flat","filter","updatePlayer","updateNpc","updateItems","updateProjectiles","tookDamage","isDead","gameOver","updateState","setState","accelerateRight","accelerateLeft","jump","shoot","animate","applyGravity","updateShootCooldown","checkLevelEdgeCollision","updateMapPosition","checkPlayerCollisions","object","splice","findIndex","id","move","checkEnemyCollisions","shouldBeDestroyed","collisionMapProjectileIndex","checkProjectileCollisions","handleLevelEdgeCollision","fellOutOfMap","collisionObject","checkCollision","doesCollide","specialCollisionEvent","processPlayerNpcCollision","processPlayerMapTileCollision","processPlayerItemCollision","endLevel","processEnemyMapTileCollision","getGroundLevel","currentLevelIndex","l","gameEnd","alert","App","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.4c01654c.chunk.js","sourcesContent":["module.exports = \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAQCAYAAABQrvyxAAACAUlEQVRIS9VWsUoDQRCdU8mBpSISWxW5gFapTOFHBOyFFAFrv8JaSCGkFSEfYRErO0EbbSy8QrAPGE9mdmezu7ezm6CCbhPI7ZuZ997s7Gbwz1eWqr8aQIV7sj4k94ZifQfP2Fj+aFF2gEVJ+FgmN48QDrbIAR4nRhsfLxLgIOXxJTSve2KAmOqAyVttgIc7KPcvTJwYCVN8t0M4xJfLJ5SG67DxQQJOEF0hBgkF8AkYLBdvbeAYEoEk9v6U3IgRoH6vBgCsXrYxNiVUbx2A0Th2HhT+RiuPZyeAD7UjFp/1VSrKo5eNf32fdQOT8B2oqHh1aGkhaGutR0E5GO4RVFT4IofsSPUt4/nXCOQNBiZA5PFbAi8SYAUxwFN5Bqv5nkMg4YJyQJPFonGhALYQ9KfnpO8AiiXi8WzoVqo5MLnahUbzpabAQg50Z24FHQi0ouNAq23cDnYAuiQRMBZ3O/D8cUhi7TTPTV+iMrEWmhfvnwPHAX2G7PzU/9MhEbPaPJOnEI4xACKxvXKr+nJ2IJPjFyJ4SQCaQkWuRu50KOa38fExWuTwuXkAS+sNNZP1hZK6jLgQugP8NVJTLRTDGaO4ycZjflxeDWklEYRqRhL7NQbn+ZwCiHeBgP/9p0TiKVC3SP1Tc0NwP/lA+6nHmNQ2EgGHhN4UarskgViCv/DtC4s4VCDE80mRAAAAAElFTkSuQmCC\"","module.exports = \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAgCAYAAADaInAlAAADPklEQVR4Xu2bMWgUQRSG98BO1GCaHIIEm7ioCNqJnY2FXmchCCqijY2NhUoqEQsbBW0E0SJgYRctbOzETkEU1zQiQrhYnETFTjiZ2bzh3bi7M2/vzYznvWtus7c7773//967uVzSyeQx1Qp0qNVfPLxv2HTPvZfvyGtScpD4vPqTzRIDeA2gwK+u5dbfGwBXYCjky/ovffj0/SfvtX1EkPjN4LXV39skMSCMAT7w+3R+MABs46HDd85sHskdzuOTHFNA4o+Cx62/cwKIAWENcE2A0Pp7A1DV4TAFFu9cNXWcP33NHHNOAIlf7q3wg0P/oABwbAahA9oAIPHdm3EnAMf37hr53L/87LaGsHfsUgYE3l26YcD8OihJnTt40rm2a/yp1yV+WP2dJokBYQ1wNUFo/ckAQMIwCewCPsz39Kk9WeZc21V81QSQ+KUCXPo7TbIJFAN4DXA1QWj9nQBAgnWjyC6Aew8g8UsFQukvALhacOP1UAZ4hk8PACS69vpx47eBXLv/OmEkPq/+3hNAACgV+N8AJANwZvGWngCDtVUtyOzcDv386Ppl8lq+4w9fJ/F59SebJgbwGkBtAm79WwPw8NyCzv3sg5UkE2Ca40PtHPpPLACqeAxB7LegVAAOPy+bTTg03zhvwRMNAIagM98j10Idv+p6GMEpAcDGQw1tG4AsWmoBID42r/vxhfnx5pPnnSsnjuouUcdtTG66J2b9uA44Vrn1dx/5K8WoAGDBIaG2CVANqgMAG4/X5IZAxY9RPzYc6oEakwFQRaHdfVRDqde7JkDVelwQxKq/ynxc1z8BQEihfUawfY3dlSGmgMuYEKDZdVaZH20TGEsA11Q4dWBBv8d3Z7bpSzfNbq+9hcsUFSBm/U2xfg++6Xr769/189KbldZ7HdKNMQVogsAXAE7zYwPQFG+qAYBv5dQfnF44tF9Pgvuv3pqdP94wuSYJ9fUUDWDHHKz2ddqqZqwFtRa4njQBcBAVvLt1i0mmbQLU++oAwB3D3flVOQJ8/R8/2f8Lyo6HPw5i6JMCkGXZMM9zk2tRFK1hIkJgfhOWKL5ON89zk0dRFOpUlPor4o7VzOMkLQBsSD/JAPwBALNNTp/ZM+IAAAAASUVORK5CYII=\"","module.exports = \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAQCAYAAAB3AH1ZAAACB0lEQVRIS5WVv0uCQRjH703QhCQooaIGMwgi2qpVqKWgIcKpKfoDWgohaHBva2uqKQhao4YIrD+hIgoyByMCC0LBErT4nnyP5z3vNbvlvR/P3fdzz/M99dTF7Y/6o63lztRhatEXxbml8o6eT8VrvvVcKdxyKmPOn+pmzesEANESQvbni5sq2httAcAeQFCUQBgDYGEspL8GIDsyaaiyxTvTD70nVL2/oAFkY0YkgBSUsZivflY1KNrM4LS6erjWYw0gxeVGCcIs4CvLsRvJ+MB4u4+9hrpZ7dZrU0df+ssxANAA8S8Al1UIAOHZU88XAkFbHOO+ja7OPcDUy1tP1JLmgPVYWtcS4pXqt+qJRny3JQA3yBiA6AywzgjC4ffhvI4PqjsPQ+zywYqBkYdLQfQJhr6Ma/sKgpwv87y9v2WG8aFh3S+9vvhK4QIjiBc6rujfAThdtnZvH3HMGgEobgNAnBmQfWr5SsDasgQu09lzAAi6uZ1uZqKlBLjNeKzpTIpLX7hAsI6WOUm3AACokG/6yG7wgsyE8QAF595G1eXAs06xhJJjgtompJgNkEg2Xw2gAIB1+sQHQC8QxhbF+mO5ocGYKZSgnfuxBwAUtMulTcibUkCC2KVxeUDWVq7Lp2fvYxmczzDod4GHsP54OfIZ2qaTokFG/fPf0PUyJKCrBEHv3gX4C3fMWq16oO9EAAAAAElFTkSuQmCC\"","module.exports = \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAgCAYAAADaInAlAAAC9ElEQVR4Xu2bMUgcURCGd5FABAubQOw03RYpQkgR0tgIV6h4hRJDbFIl6S0ipBK0SJ9YXSOoaHFBxRzYpAmpgkWKLQJeuuQIQgpjAkFW3pyz3D5ub9579/YttzvX7N3e7v4z/3wz+/ZE3+NXqR3wdbOPNryo1zn+c0/7mjoxsL5d/7WLxQWwWwAd+MWxtv1XBoASxkSav4bg7Z3Xl8rXVjGB9XuDZ+q/cpG4ANkUQAV+lc7PDAC58NjhE7cuE7HjfjmhficB6yfBs+0/OQG4ANkWgJoAWfuvDEBah+MkaD3Yhlwujp4mcrI1AVi/vbaSX/36zwAQLYgdmBeAp6tDPR+7MwdADmBiqQ6WNTersI3XApV9+Nw6+5OYBP1OANZPAmDbf3ICDHoBsMFNQSx6/toAoKFIojxB/fFZ2HW6auf3gLQRSOl7XvsXSTzfFgBFy58BINYApgAOSgOQAKA/aaNQ9g/XALfvLypfm3oU6uxkqgNZv70GU/VfuUgMQPfF2KA3gDIAmOjPL9s9H0tUyVPp+m7HsL5d/xkATRKLBqA2ANP1OZgAd7f+gXVfn9yE7WH1vfa1VLx/NV9JTBzUc6Uvx1i0/LWL5tqAWq0WffuwG9ehbABknT8JgNyBWIm1Ny/h7cryW9iu7zXIa6l0vHyMbIBr/aLnTxaNC5CcQEUDUBsAHMEH956BFzMntVzWAK7000awK/20NZAtfRKArAOgbgus330RnDsAcuFcPwWwftIBU/+NJ4CrAqQ9hrnST5tArvSzzp8BIO5BpQcgzZ+ppc/RyMgYfF1/N06CRN3rdb4X2uL4vPSFdvXFd4jh/PyHd7z50Gn+ndoihn70jQNnAEoOwKOZnejG8Cg07sfdijFIOp0vjhW6Yvvp4LE/udCA9y71MV7U/v/3N8Sim4fp8Z05d3phej3jwBmANnylBUD8m1oQBDF4YRgaw6RJb/zHoZz0IdwgCOI4wjAUu5zk30UX7TPSNzrpWpEBuDZikAG4AoTccE5ZZQccAAAAAElFTkSuQmCC\"","module.exports = \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAf0lEQVQ4T7VTWw7AIAjD+x/aBZOSIo/FmfknpZVHHZKfWcQ1PBhzFxFh4o4pL+CcBDAj7gVZLpJPyBBbHBXoyK8tQaCbRTuzTKCqKIvPXwSwrqqt4AMtLUu+FmDXVduwGQSLbq7jlTvzsZFOHGirvXHiEvn6F0IFzt/NVwZkDz/OZygJThsIYgAAAABJRU5ErkJggg==\"","export enum MapTileType{\r\n    DEFAULT,\r\n    HIDDEN,\r\n    HURTFUL,\r\n    EXIT,\r\n    TRAMPOLINE,\r\n    ICE\r\n}","export default class Config {\r\n\r\n    static canvasSize: any = {w:755, h:425};\r\n    static gravity: number = 2;\r\n    static fps: number = 30;\r\n    static gameInterval: any;\r\n\r\n}","/**\r\n * \r\n * helper class for transforming relative positions of sprites in a sprite image\r\n * into x and y pixel values depending on the used sprite size\r\n * \r\n */\r\nexport default class SpritePosition {\r\n\r\n    private _tileX: number;\r\n    \r\n    private _tileY: number;\r\n    \r\n    constructor(tileX: number, tileY: number) {\r\n\r\n        this._tileX = tileX;\r\n        this._tileY = tileY;\r\n    }\r\n\r\n    public get tileX(): number {\r\n        return this._tileX;\r\n    }\r\n\r\n    public set tileX(value: number) {\r\n        this._tileX = value;\r\n    }\r\n\r\n    public get tileY(): number {\r\n        return this._tileY;\r\n    }\r\n\r\n    public set tileY(value: number) {\r\n        this._tileY = value;\r\n    }\r\n\r\n\r\n    public getXPosForSpriteWidth(spriteSizeWidth:number): number {\r\n        return spriteSizeWidth*this._tileX;\r\n    }\r\n\r\n    public getYPosForSpriteHeight(spriteSizeHeight:number): number {\r\n        return spriteSizeHeight*this._tileY;\r\n    }\r\n}","import { MapTileType } from './MapTileType';\r\nimport SpritePosition from '../SpritePosition';\r\nimport ICollisionObject from '../Collision/ICollisionObject';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nexport default class MapTile implements ICollisionObject{\r\n    private _id: string;\r\n\r\n    private _xPos: number;\r\n    private _yPos: number;\r\n\r\n\r\n    private _xPosCanvas: number;\r\n    private _yPosCanvas: number;\r\n\r\n    private _spritePos: SpritePosition;\r\n    \r\n    private _collision: boolean;\r\n    \r\n    private _solid: boolean;\r\n    \r\n    private _hurtful: boolean;\r\n    \r\n    private _type: MapTileType;\r\n\r\n    private _friction: number = 0.8;\r\n        \r\n\r\n    private static _sourceSize: number = 16;\r\n    private static _targetSize: number = 32;\r\n\r\n    private _targetSize: number;\r\n    \r\n\r\n    constructor(spritePos: SpritePosition, collision: boolean, solid: boolean, hurtful: boolean, type: MapTileType) {\r\n        this._xPos = 0;\r\n        this._yPos = 0;\r\n        this._xPosCanvas = 0;\r\n        this._yPosCanvas = 0;\r\n        this._spritePos = spritePos;\r\n        this._collision = collision;\r\n        this._solid = solid;\r\n        this._hurtful = hurtful;\r\n        this._type = type;\r\n        this._targetSize = MapTile.targetSize;\r\n        this.setFriction();\r\n        this._id = uuidv4();\r\n    }\r\n\r\n    cloneTile(): MapTile{\r\n        let newMapTile = new MapTile(new SpritePosition(this.spritePos.tileX, this.spritePos.tileY), this.collision, this.solid, this.hurtful, this.type);\r\n        newMapTile.xPos = this._xPos;\r\n        newMapTile.yPos = this._yPos;\r\n        newMapTile.xPosCanvas = this._xPosCanvas;\r\n        newMapTile.yPosCanvas = this._yPosCanvas;\r\n        return newMapTile;\r\n    };\r\n\r\n    public get id(): string {\r\n        return this._id;\r\n    }\r\n\r\n    public get xPos(): number {\r\n        return this._xPos;\r\n    }\r\n    public set xPos(value: number) {\r\n        this._xPos = value;\r\n    }\r\n\r\n    public get yPos(): number {\r\n        return this._yPos;\r\n    }\r\n    public set yPos(value: number) {\r\n        this._yPos = value;\r\n    }\r\n\r\n\r\n    public get xPosCanvas(): number {\r\n        return this._xPosCanvas;\r\n    }\r\n    public set xPosCanvas(value: number) {\r\n        this._xPosCanvas = value;\r\n    }\r\n\r\n    public get yPosCanvas(): number {\r\n        return this._yPosCanvas;\r\n    }\r\n    public set yPosCanvas(value: number) {\r\n        this._yPosCanvas = value;\r\n    }\r\n\r\n    public get spritePos(): SpritePosition {\r\n        return this._spritePos;\r\n    }\r\n    public set spritePos(value: SpritePosition) {\r\n        this._spritePos = value;\r\n    }\r\n\r\n    public get collision(): boolean {\r\n        return this._collision;\r\n    }\r\n    public set collision(value: boolean) {\r\n        this._collision = value;\r\n    }\r\n\r\n    public get solid(): boolean {\r\n        return this._solid;\r\n    }\r\n    public set solid(value: boolean) {\r\n        this._solid = value;\r\n    }\r\n\r\n    public get hurtful(): boolean {\r\n        return this._hurtful;\r\n    }\r\n    public set hurtful(value: boolean) {\r\n        this._hurtful = value;\r\n    }\r\n\r\n    public get type(): MapTileType {\r\n        return this._type;\r\n    }\r\n    public set type(value: MapTileType) {\r\n        this._type = value;\r\n    }\r\n\r\n    public static get sourceSize(): number {\r\n        return MapTile._sourceSize;\r\n    }\r\n\r\n    public static get targetSize(): number {\r\n        return MapTile._targetSize;\r\n    }\r\n\r\n    public get targetSize(): number {\r\n        return this._targetSize;\r\n    }\r\n\r\n    public get friction(): number {\r\n        return this._friction;\r\n    }\r\n\r\n    private setFriction(){\r\n        switch (this._type) {\r\n            case MapTileType.ICE:\r\n                this._friction = 0.95;\r\n                break;\r\n            default:\r\n                this._friction = 0.9;\r\n                break;\r\n        }\r\n    }\r\n\r\n}","import React from 'react';\r\nimport './Gamecanvas.css';\r\nimport Config from './Config';\r\nimport Level from './Levels/Level';\r\nimport MapTile from './Map/MapTile';\r\nimport Entity from './Entities/Entity';\r\n\r\ninterface IGameCanvasProps{\r\n    currentLevel: Level;\r\n    ticks: number;\r\n    levelPosX: number;\r\n    entities: Entity[];\r\n}\r\n\r\ninterface IGameCanvasState{\r\n}\r\n\r\nexport default class Canvas extends React.Component<IGameCanvasProps, IGameCanvasState> {\r\n\r\n    private gameCanvasRef: any;\r\n    private gameSketchImgRef: any;\r\n    private ctx: any;\r\n\r\n    constructor(props: IGameCanvasProps) {\r\n        super(props);\r\n        this.gameCanvasRef = React.createRef();\r\n        this.gameSketchImgRef = React.createRef();\r\n    }\r\n\r\n    render() {\r\n        if(this.ctx){\r\n            this.drawLevel(this.props.currentLevel, this.props.levelPosX);\r\n            this.drawEntities(this.props.entities, this.props.levelPosX);\r\n        }\r\n        return (\r\n            <div>\r\n                <canvas ref={this.gameCanvasRef} width={Config.canvasSize.w} height={Config.canvasSize.h} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    componentDidMount() {\r\n        const canvas = this.gameCanvasRef.current;\r\n        this.ctx = canvas.getContext(\"2d\");\r\n    }\r\n\r\n    drawLevel(currentLevel: Level, levelPosX: number) {\r\n\r\n        this.ctx.clearRect(0, 0, Config.canvasSize.w, Config.canvasSize.h);\r\n        if (levelPosX < 0) {\r\n            levelPosX = 0;\r\n        }\r\n        // first tile to display:\r\n        let indexFirstTile = Math.trunc(levelPosX / MapTile.targetSize);\r\n        let offset_x = levelPosX % MapTile.targetSize;\r\n\r\n        // last tile to show\r\n        let indexLastTile = indexFirstTile + currentLevel.map.numberOfDisplayedTilesWidth;\r\n    \r\n        let currentLevelMapTiles = currentLevel.map.mapTiles;\r\n\r\n        currentLevelMapTiles.forEach((mapTileLayer, index) => {\r\n            this.drawLayer(mapTileLayer, index, indexFirstTile, indexLastTile, offset_x, currentLevel);\r\n        });\r\n        \r\n    }\r\n\r\n    drawLayer(mapTileLayer: MapTile[], currentLayerIndex: number, indexFirstTile: number, indexLastTile: number, offset_x: number, currentLevel: Level) {\r\n        for (let indexCurrentTile = indexFirstTile; indexCurrentTile < indexLastTile; indexCurrentTile++) {\r\n\r\n            let mapTile = mapTileLayer[indexCurrentTile];\r\n            \r\n            if(mapTile){ //if map template smaller than canvas width map tiles not defined -> TODO refactor\r\n                mapTile.xPosCanvas = indexCurrentTile * MapTile.targetSize - offset_x;\r\n                mapTile.yPosCanvas = currentLayerIndex * MapTile.targetSize;\r\n                this.ctx.drawImage(currentLevel.map.spriteMap,\r\n                    mapTile.spritePos.getXPosForSpriteWidth(MapTile.sourceSize + 1),\r\n                    mapTile.spritePos.getYPosForSpriteHeight(MapTile.sourceSize + 1),\r\n                    MapTile.sourceSize - 0.8,\r\n                    MapTile.sourceSize - 0.8,\r\n                    mapTile.xPosCanvas - (indexFirstTile * MapTile.targetSize),\r\n                    mapTile.yPosCanvas,\r\n                    MapTile.targetSize,\r\n                    MapTile.targetSize\r\n                );\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    drawEntities(entities: Entity[], levelPosX: number){\r\n        entities.forEach(entity => {\r\n            this.ctx.drawImage(\r\n                entity.spriteMap,\r\n                entity.spritePos.getXPosForSpriteWidth(entity.sourceSize),\r\n                entity.spritePos.getYPosForSpriteHeight(entity.sourceSize),\r\n                entity.sourceSize,\r\n                entity.sourceSize,\r\n                entity.xPos - levelPosX,\r\n                entity.yPos,\r\n                entity.targetSize,\r\n                entity.targetSize\r\n            );\r\n        });\r\n    }\r\n\r\n}","import React from 'react';\r\nimport './GameUI.css';\r\n\r\ninterface IGameUIProps{\r\n\r\n}\r\n\r\ninterface IGameUIState{\r\n\r\n}\r\n\r\nexport default class GameUI extends React.Component<IGameUIProps, IGameUIState> {\r\n\r\n    // eslint-disable-next-line\r\n    constructor(props:IGameUIProps){\r\n        super(props);\r\n\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"GameUI\">\r\n              <header className=\"GameUI-header\">\r\n        \r\n              </header>\r\n            </div>\r\n          );\r\n    }\r\n\r\n    drawUI(){\r\n        //TODO implement\r\n    }\r\n  \r\n}\r\n\r\n","\r\nclass Controls {\r\n\r\n    static heldLeft: boolean = false;\r\n    static heldRight: boolean = false;\r\n    static heldUp: boolean = false;\r\n    static heldDown: boolean = false;\r\n    static Escape: boolean = false;\r\n    static heldE: boolean = false;\r\n\r\n    static registerKeyEvents(){\r\n        window.onkeydown = function (e: any) {\r\n            switch (e.keyCode) {\r\n                case 37: // left\r\n                    e.preventDefault();\r\n                    Controls.heldLeft = true;\r\n                    break;\r\n                case 32: // space\r\n                    e.preventDefault();\r\n                    Controls.heldUp = true;\r\n                    break;\r\n                case 38: // up\r\n                    e.preventDefault();\r\n                    Controls.heldUp = true;\r\n                    break;\r\n                case 39: // right\r\n                    e.preventDefault();\r\n                    Controls.heldRight = true;\r\n                    break;\r\n                case 40: // down\r\n                    e.preventDefault();\r\n                    Controls.heldDown = true;\r\n                    break;\r\n                case 27: // escape\r\n                    e.preventDefault();\r\n                    Controls.Escape = true;\r\n                    break;\r\n                case 69: // E\r\n                    e.preventDefault();\r\n                    Controls.heldE = true;\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n            return false;\r\n        };\r\n    \r\n        window.onkeyup = function (e: any) {\r\n            switch (e.keyCode) {\r\n                case 37: // left\r\n                    e.preventDefault();\r\n                    Controls.heldLeft = false;\r\n                    break;\r\n                case 32: // space\r\n                    e.preventDefault();\r\n                    Controls.heldUp = false;\r\n                    break;\r\n                case 38: // up\r\n                    e.preventDefault();\r\n                    Controls.heldUp = false;\r\n                    break;\r\n                case 39: // right\r\n                    e.preventDefault();\r\n                    Controls.heldRight = false;\r\n                    break;\r\n                case 40: // down\r\n                    e.preventDefault();\r\n                    Controls.heldDown = false;\r\n                    break;\r\n                case 69: // e\r\n                    e.preventDefault();\r\n                    Controls.heldE = false;\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Controls;","import Npc from \"../Entities/characters/Npc\";\r\nimport Item from \"../Entities/items/Item\";\r\nimport Map from \"../Map/Map\";\r\n\r\nexport default class Level {\r\n\r\n    private _name: string;\r\n    \r\n    private _backgroundColor: string;\r\n    \r\n    private _map: Map;\r\n     \r\n    private _enemies: Npc[];\r\n    private _items: Item[];\r\n   \r\n\r\n    constructor(name: string, backgroundColor: string, map: Map, enemies: Npc[], ects: Item[]) {\r\n\r\n        this._name = name;\r\n        this._backgroundColor = backgroundColor;\r\n        this._map = map;\r\n        this._enemies = enemies;\r\n        this._items = ects;\r\n\r\n    }\r\n\r\n    public get name(): string {\r\n        return this._name;\r\n    }\r\n\r\n    public get backgroundColor(): string {\r\n        return this._backgroundColor;\r\n    }\r\n\r\n    public get map(): Map {\r\n        return this._map;\r\n    }\r\n\r\n    public get enemies(): Npc[] {\r\n        return this._enemies;\r\n    }\r\n\r\n    public get items(): Item[] {\r\n        return this._items;\r\n    }\r\n    public set items(value:Item[]){\r\n        this._items = value;\r\n    }\r\n}","import SpritePosition from \"../SpritePosition\";\r\nimport ICollisionObject from \"../Collision/ICollisionObject\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport Map from \"../Map/Map\";\r\n\r\nexport default class Entity implements ICollisionObject{\r\n    private _id: string;\r\n    private _xPos: number;\r\n    private _yPos: number;\r\n    private _collision: boolean;\r\n    \r\n    \r\n    private _spriteMap: HTMLImageElement;\r\n    private _spritePos: SpritePosition;\r\n    private _sourceSize: number;\r\n    private _targetSize: number;\r\n\r\n    constructor(xPos:number, yPos:number, spriteMap:HTMLImageElement, spritePos:SpritePosition, sourceSize:number, targetSize:number, collision: boolean) {\r\n        this._xPos = xPos;\r\n        this._yPos = yPos;\r\n        this._collision = collision;\r\n\r\n        this._spriteMap = spriteMap;\r\n        this._spritePos = spritePos;\r\n        this._sourceSize = sourceSize;\r\n        this._targetSize = targetSize;\r\n        this._id = uuidv4();\r\n    }\r\n\r\n    public handleLevelEdgeCollision(map: Map){}\r\n\r\n    public fellOutOfMap(){}\r\n\r\n    public get id(): string {\r\n        return this._id;\r\n    }\r\n\r\n    public get xPos(): number {\r\n        return this._xPos;\r\n    }\r\n    public set xPos(value: number) {\r\n        this._xPos = value;\r\n    }\r\n\r\n    public get yPos(): number {\r\n        return this._yPos;\r\n    }\r\n    public set yPos(value: number) {\r\n        this._yPos = value;\r\n    }\r\n\r\n    public get spriteMap(): HTMLImageElement {\r\n        return this._spriteMap;\r\n    }\r\n    public set spriteMap(value: HTMLImageElement) {\r\n        this._spriteMap = value;\r\n    }\r\n\r\n    public get spritePos(): SpritePosition {\r\n        return this._spritePos;\r\n    }\r\n    public set spritePos(value: SpritePosition) {\r\n        this._spritePos = value;\r\n    }\r\n    \r\n    public get sourceSize(): number {\r\n        return this._sourceSize;\r\n    }\r\n    public set sourceSize(value: number) {\r\n        this._sourceSize = value;\r\n    }\r\n\r\n    public get targetSize(): number {\r\n        return this._targetSize;\r\n    }\r\n    public set targetSize(value: number) {\r\n        this._targetSize = value;\r\n    }\r\n    public get collision(): boolean {\r\n        return this._collision;\r\n    }\r\n}","import Entity from \"../Entity\";\r\nimport SpritePosition from \"../../SpritePosition\";\r\n\r\nexport default class Item extends Entity{\r\n    private _isCollected: boolean;\r\n   \r\n    \r\n    // eslint-disable-next-line\r\n    constructor(xPos:number, yPos:number, spriteMap:HTMLImageElement, spritePos:SpritePosition, sourceSize:number, targetSize:number, collision: boolean, isCollected: boolean) {\r\n        super(xPos, yPos, spriteMap, spritePos, sourceSize, targetSize, collision);\r\n        this._isCollected = isCollected;\r\n    }\r\n\r\n    public get isCollected(): boolean {\r\n        return this._isCollected;\r\n    }\r\n    public set isCollected(value: boolean) {\r\n        this._isCollected = value;\r\n    }\r\n\r\n    public animate(ticks:number){}\r\n\r\n\r\n}","import Item from './Item';\r\nimport SpritePosition from '../../SpritePosition';\r\nimport ectsSpriteImage from '../../images/ectsSprite.jpg';\r\n\r\nexport default class Ects extends Item{\r\n\r\n    constructor(xPos:number, yPos:number) {\r\n        let spriteMap = new Image();\r\n        spriteMap.src = ectsSpriteImage;\r\n        let spritePos = new SpritePosition(0,0);\r\n        let sourceSize = 16;\r\n        let targetSize = 32;\r\n        let collision = true;\r\n        let isCollected = false;\r\n        super(xPos, yPos, spriteMap, spritePos, sourceSize, targetSize, collision, isCollected);\r\n    }\r\n\r\n    public animate(ticks:number){\r\n\r\n        if(ticks % 10 === 0){\r\n            \r\n            switch (this.spritePos.tileX){ \r\n                case 0:\r\n                    this.spritePos.tileX = 1;\r\n                    break;\r\n                case 1:\r\n                    this.spritePos.tileX = 2;\r\n                    break;\r\n                case 2:\r\n                    this.spritePos.tileX = 0;\r\n                    break;\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n}","import Entity from \"../Entity\";\r\nimport SpritePosition from \"../../SpritePosition\";\r\n\r\nexport default class Character extends Entity{\r\n\r\n    private _xSpeed: number;\r\n    private _ySpeed: number;\r\n\r\n\r\n    private _xVelocity: number;\r\n    private _xVelocityJump: number;\r\n    private _yVelocity: number;\r\n    private _friction: number;\r\n    \r\n\r\n    private _lives: number;\r\n    \r\n\r\n    constructor(xPos:number, yPos:number, spriteMap:HTMLImageElement, spritePos:SpritePosition, sourceSize:number, targetSize:number, xVelocity:number, xVelocityJump: number, yVelocity:number, friction:number, lives:number, collision: boolean) {\r\n        super(xPos, yPos, spriteMap, spritePos, sourceSize, targetSize, collision);\r\n        this._xSpeed = 0;\r\n        this._ySpeed = 0;\r\n\r\n        this._xVelocity = xVelocity;\r\n        this._xVelocityJump = xVelocityJump;\r\n        this._yVelocity = yVelocity;\r\n        this._friction = friction;\r\n\r\n        this._lives = lives;\r\n    }\r\n\r\n\r\n    public addLife(){\r\n        this._lives += 1;\r\n    }\r\n\r\n    public takeDamage(){\r\n        this._lives -= 1;\r\n    }\r\n\r\n    public kill(){\r\n        this._lives = 0;\r\n    }\r\n\r\n    public isDead(): boolean {\r\n        return this._lives <= 0;\r\n    }\r\n\r\n    public get xSpeed(): number {\r\n        return this._xSpeed;\r\n    }\r\n    public set xSpeed(value: number) {\r\n        this._xSpeed = value;\r\n    }\r\n\r\n    public get ySpeed(): number {\r\n        return this._ySpeed;\r\n    }\r\n    public set ySpeed(value: number) {\r\n        this._ySpeed = value;\r\n    }\r\n\r\n    protected get xVelocity(): number {\r\n        return this._xVelocity;\r\n    }\r\n\r\n    protected get xVelocityJump(): number {\r\n        return this._xVelocityJump;\r\n    }\r\n\r\n    protected get yVelocity(): number {\r\n        return this._yVelocity;\r\n    }\r\n\r\n    protected get friction(): number {\r\n        return this._friction;\r\n    }\r\n    protected set friction(value: number) {\r\n        this._friction = value;\r\n    }\r\n\r\n    public get lives(): number {\r\n        return this._lives;\r\n    }\r\n    public set lives(value: number) {\r\n        this._lives = value;\r\n    }\r\n\r\n}","import Character from './Character';\r\nimport SpritePosition from '../../SpritePosition';\r\nimport ICollisionObject from '../../Collision/ICollisionObject';\r\nimport Map from '../../Map/Map';\r\n\r\nexport default class Npc extends Character implements ICollisionObject{\r\n\r\n    private _speedLimitY: number;\r\n\r\n    // eslint-disable-next-line\r\n    constructor(xPos:number, yPos:number, spriteMap:HTMLImageElement, spritePos:SpritePosition, sourceSize:number, targetSize:number, xVelocity:number, xVelocityJump: number, yVelocity:number, speedLimitY:number, friction:number, lives:number, collision: boolean) {\r\n        super(xPos, yPos, spriteMap, spritePos, sourceSize, targetSize, xVelocity, xVelocityJump, yVelocity, friction, lives, collision);\r\n        this._speedLimitY = speedLimitY;\r\n    }\r\n\r\n    public fellOutOfMap(){\r\n        this.kill();\r\n    }\r\n\r\n    public animate(ticks: number){}\r\n\r\n    public move(map: Map){}\r\n\r\n    public applyGravity(gravity:number){}\r\n\r\n    public switchDirection(){}\r\n\r\n    public handleLevelEdgeCollision(map: Map){\r\n        if (this.xPos < 0) {\r\n            this.xPos = 0;\r\n            this.switchDirection();\r\n        }\r\n        else if (this.xPos + this.targetSize > map.mapWidth) {\r\n            this.xPos = map.mapWidth - this.targetSize;\r\n            this.switchDirection();\r\n        }\r\n    }\r\n\r\n    protected get speedLimitY(): number {\r\n        return this._speedLimitY;\r\n    }\r\n    protected set speedLimitY(value: number) {\r\n        this._speedLimitY = value;\r\n    }\r\n\r\n}","import Npc from './Npc';\r\nimport profSpriteImage from '../../images/profSprite.jpg';\r\nimport SpritePosition from '../../SpritePosition';\r\nimport Map from '../../Map/Map';\r\n\r\nexport default class Prof extends Npc {\r\n    \r\n    private movingRight:boolean;\r\n    private movingLeft:boolean;\r\n\r\n    constructor(xPos:number, yPos:number) {\r\n\r\n        let spriteMap = new Image();\r\n        spriteMap.src = profSpriteImage;\r\n        let spritePos = new SpritePosition(0,0);\r\n        let sourceSize = 32;\r\n        let targetSize = 32;\r\n        let xVelocity = 2;\r\n        let xVelocityJump = 1;\r\n        let yVelocity = 25;\r\n        let speedLimitY = 25;\r\n        let friction = 0.4;\r\n        let lives = 1;\r\n        let collision = true;\r\n        super(xPos, yPos, spriteMap, spritePos, sourceSize, targetSize, xVelocity, xVelocityJump, yVelocity,speedLimitY, friction, lives, collision);\r\n        this.xSpeed = 4;\r\n        this.movingLeft = true;\r\n        this.movingRight = !this.movingLeft;\r\n    }\r\n\r\n    public animate(ticks: number) {\r\n        if (ticks % 4 === 0) {\r\n            switch (this.spritePos.tileX) {\r\n                case 0:\r\n                    this.spritePos.tileX = 1;\r\n                    break;\r\n                case 1:\r\n                    this.spritePos.tileX = 2;\r\n                    break;\r\n                case 2:\r\n                    this.spritePos.tileX = 3;\r\n                    break;\r\n                case 3:\r\n                    this.spritePos.tileX = 0;\r\n                    break;\r\n                default:\r\n                    this.spritePos.tileX = 0;\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    public move(map: Map){\r\n        \r\n        if(this.movingLeft){\r\n            this.moveLeft(map);\r\n        }\r\n        else if(this.movingRight){\r\n            this.moveRight(map);\r\n        }\r\n\r\n    }\r\n\r\n    private moveLeft(map: Map){\r\n        let mapTileToBotLeft = map.getMapTileAtXY(this.xPos, this.yPos + this.targetSize);\r\n        if (mapTileToBotLeft && (!mapTileToBotLeft.solid || mapTileToBotLeft.hurtful)){\r\n            this.switchDirection();\r\n        }\r\n        else{\r\n            this.xPos -= this.xSpeed;\r\n        }\r\n    }\r\n\r\n    private moveRight(map: Map){\r\n        let mapTileToBotRight = map.getMapTileAtXY(this.xPos + this.targetSize, this.yPos + this.targetSize);\r\n\r\n        if (mapTileToBotRight && (!mapTileToBotRight.solid || mapTileToBotRight.hurtful)){\r\n            this.switchDirection();\r\n            \r\n        }\r\n        else{\r\n            this.xPos += this.xSpeed;\r\n        }\r\n    }\r\n\r\n    public switchDirection(){\r\n        this.movingLeft = !this.movingLeft;\r\n        this.movingRight = !this.movingRight;\r\n    }\r\n\r\n    public applyGravity(gravity:number){\r\n        this.ySpeed = (this.ySpeed+gravity > this.speedLimitY) ? this.speedLimitY : this.ySpeed+gravity;\r\n        this.yPos += this.ySpeed;\r\n    }\r\n\r\n\r\n}","import MapTile from \"./MapTile\";\r\nimport { MapTileType } from \"./MapTileType\";\r\nimport mapTileImage from \"../images/mapTileImage.jpg\";\r\nimport SpritePosition from \"../SpritePosition\";\r\nimport Config from \"../Config\";\r\n\r\nexport default class Map {\r\n\r\n    private _mapTiles: MapTile[][];\r\n    private _spriteMap: HTMLImageElement;\r\n    private _numberOfDisplayedTilesWidth: number;\r\n    private _numberOfDisplayTilesHeight: number;\r\n    private _mapWidth: number;\r\n    private _mapHeight: number;\r\n   \r\n\r\n    constructor(template: string[]) {\r\n\r\n        this._mapTiles = this.generateMapTiles(template);\r\n        this._spriteMap = new Image();\r\n        this._spriteMap.src = mapTileImage;\r\n\r\n        this._numberOfDisplayedTilesWidth = Config.canvasSize.w / MapTile.targetSize; \r\n        this._numberOfDisplayTilesHeight = Config.canvasSize.h / MapTile.targetSize;\r\n\r\n        this._mapWidth = MapTile.targetSize * this._mapTiles[0].length;\r\n        this._mapHeight = MapTile.targetSize * this._mapTiles.length;\r\n    }\r\n\r\n    private generateMapTiles(template: string[]){\r\n        let mapTiles: MapTile[][] = [];\r\n        template.forEach((layer, layerIndex) => {\r\n            let currentLayerTiles: MapTile[] = [];\r\n            for(let tileIndex=0; tileIndex < layer.length; tileIndex++){\r\n                let newTileIndex = currentLayerTiles.push(Map.tiles[layer[tileIndex]].cloneTile())-1;\r\n                currentLayerTiles[newTileIndex].xPos = tileIndex*MapTile.targetSize;\r\n                currentLayerTiles[newTileIndex].yPos = layerIndex*MapTile.targetSize;\r\n            }\r\n            mapTiles.push(currentLayerTiles);\r\n        });\r\n        return mapTiles;\r\n    }\r\n\r\n    public getGroundLevel(): number{\r\n        return this.mapHeight - MapTile.targetSize*2; //second last tile on y axis\r\n    }\r\n\r\n    private static tiles: { [id: string]: MapTile } = {\r\n        ' ' : new MapTile(new SpritePosition(0,0),false,false,false, MapTileType.DEFAULT),\r\n        '#' : new MapTile(new SpritePosition(1,0),true,true,false, MapTileType.DEFAULT),\r\n    }\r\n\r\n    public getMapTileAtXY(x:number, y:number): MapTile{\r\n        let xTileIndex = Math.trunc(x / MapTile.targetSize);\r\n        let yTileIndex = Math.trunc(y / MapTile.targetSize);\r\n\r\n        return this.mapTiles[yTileIndex][xTileIndex];\r\n    }\r\n\r\n    public get mapTiles(): MapTile[][] {\r\n        return this._mapTiles;\r\n    }\r\n    public set mapTiles(value: MapTile[][]) {\r\n        this._mapTiles = value;\r\n    }\r\n\r\n    public get spriteMap(): HTMLImageElement {\r\n        return this._spriteMap;\r\n    }\r\n    public set spriteMap(value: HTMLImageElement) {\r\n        this._spriteMap = value;\r\n    }\r\n\r\n    public get numberOfDisplayedTilesWidth(): number {\r\n        return this._numberOfDisplayedTilesWidth;\r\n    }\r\n\r\n    public get mapWidth(): number {\r\n        return this._mapWidth;\r\n    }\r\n    public get mapHeight(): number {\r\n        return this._mapHeight;\r\n    }\r\n\r\n}","import Level from './Level';\r\nimport Ects from '../Entities/items/Ects';\r\nimport Prof from '../Entities/characters/Prof';\r\nimport Map from '../Map/Map';\r\nimport MapTile from '../Map/MapTile';\r\n\r\nclass Levels {\r\n\r\n    static levels: Level[] = [\r\n\r\n        new Level(\"1\", \"grey\", new Map([\r\n            \"                                  \",\r\n            \"                                  \",\r\n            \"                                  \",\r\n            \"                                  \",\r\n            \"  #######                         \",\r\n            \"                  #######         \",\r\n            \"                                  \",\r\n            \"                                  \",\r\n            \"##################################\",\r\n        ]),\r\n        [\r\n            new Prof( Levels.getCoordinateForRelativeMapPos(20), Levels.getCoordinateForRelativeMapPos(4) )\r\n        ],\r\n        [\r\n            new Ects( Levels.getCoordinateForRelativeMapPos(10), Levels.getCoordinateForRelativeMapPos(1) )\r\n        ],\r\n        ),\r\n\r\n        new Level(\"2\", \"grey\", new Map([\r\n            \"\",\r\n            \"\",\r\n            \"\",\r\n        ]),\r\n        [new Prof(0, 0)],\r\n        [new Ects(0, 0)],\r\n        )\r\n\r\n    ];\r\n\r\n    private static getCoordinateForRelativeMapPos(relativeMapPos: number): number{\r\n        return MapTile.targetSize * relativeMapPos;\r\n    }\r\n\r\n}\r\n\r\nexport default Levels;","export default class Collision{\r\n\r\n    private _top: boolean;\r\n    private _bot: boolean;\r\n    private _right: boolean;\r\n    private _left: boolean;\r\n    \r\n    constructor()\r\n    constructor(top?:boolean,bot?:boolean,left?:boolean,right?:boolean){\r\n        this._top = top || false;\r\n        this._bot = bot || false;\r\n        this._right = right || false;\r\n        this._left = left || false;\r\n    }\r\n\r\n    public doesCollide(): boolean{\r\n        return this._top || this._bot || this._right || this._left;\r\n    }\r\n\r\n    public get top(): boolean {\r\n        return this._top;\r\n    }\r\n    public set top(value: boolean) {\r\n        this._top = value;\r\n    }\r\n\r\n    public get bot(): boolean {\r\n        return this._bot;\r\n    }\r\n    public set bot(value: boolean) {\r\n        this._bot = value;\r\n    }\r\n\r\n    public get right(): boolean {\r\n        return this._right;\r\n    }\r\n    public set right(value: boolean) {\r\n        this._right = value;\r\n    }\r\n\r\n    public get left(): boolean {\r\n        return this._left;\r\n    }\r\n    public set left(value: boolean) {\r\n        this._left = value;\r\n    }\r\n    \r\n\r\n}","import ICollisionObject from \"./ICollisionObject\";\r\nimport Collision from \"./Collision\";\r\nimport Player from \"../Entities/characters/Player\";\r\nimport Npc from \"../Entities/characters/Npc\";\r\nimport MapTile from \"../Map/MapTile\";\r\nimport { MapTileType } from \"../Map/MapTileType\";\r\nimport Item from \"../Entities/items/Item\";\r\nimport SpecialCollisionEvents from \"./SpecialCollisionEvents\";\r\nimport Ects from \"../Entities/items/Ects\";\r\n\r\nexport default class CollisionMap{\r\n\r\n    private _collisionObjects: ICollisionObject[];\r\n    \r\n    constructor()\r\n    constructor(collisionObjects?: ICollisionObject[]){\r\n        this._collisionObjects = collisionObjects || [];\r\n    }\r\n\r\n    public get collisionObjects(): ICollisionObject[] {\r\n        return this._collisionObjects;\r\n    }\r\n    public set collisionObjects(value: ICollisionObject[]) {\r\n        this._collisionObjects = value;\r\n    }\r\n\r\n    public static checkCollision(obj1: ICollisionObject, obj2: ICollisionObject) : Collision {\r\n\r\n        let collision = new Collision();\r\n\r\n        let obj1MiddleX = obj1.xPos + obj1.targetSize/2;\r\n        let obj1MiddleY = obj1.yPos + obj1.targetSize/2;\r\n        let obj1RightX = obj1.xPos + obj1.targetSize;\r\n        let obj1BotY = obj1.yPos + obj1.targetSize;\r\n        let obj2RightX = obj2.xPos + obj2.targetSize;\r\n        let obj2BotY = obj2.yPos + obj2.targetSize;\r\n\r\n        // TODO use depth collision check\r\n        //below or above object\r\n        if(this.inRange(obj1MiddleX, obj2.xPos - 0.25 * obj2.targetSize, obj2.xPos + 1.25 * obj2.targetSize)){\r\n            \r\n            if(this.inRange(obj1BotY, obj2.yPos, obj2BotY) && obj1.yPos < obj2.yPos){\r\n                collision.bot = true;\r\n            }\r\n            else if(this.inRange(obj1.yPos, obj2.yPos, obj2BotY)){\r\n                collision.top = true;\r\n            }\r\n        }\r\n        \r\n        // TODO use depth collision check\r\n        //right or left of object\r\n        if(this.inRange(obj1MiddleY, obj2.yPos - 0.25 * obj2.targetSize, obj2.yPos + 1.25 * obj2.targetSize)){\r\n\r\n            if (this.inRange(obj1RightX, obj2.xPos, obj2RightX)) {\r\n                collision.right = true;\r\n            }\r\n            if (this.inRange(obj1.xPos, obj2.xPos, obj2RightX)) {\r\n                collision.left = true;\r\n            }\r\n        }\r\n\r\n        return collision;\r\n\r\n    }\r\n\r\n    public static processPlayerNpcCollision(player: Player, npc: Npc, collides: Collision){\r\n\r\n        if (collides.bot) {\r\n            player.yPos = npc.yPos - player.targetSize;\r\n            player.ySpeed = 0;\r\n            npc.takeDamage();\r\n            player.smallJump();\r\n        }\r\n        else if (collides.top || collides.right || collides.left) {\r\n            player.takeDamage();\r\n        }\r\n\r\n    }\r\n\r\n    public static processPlayerMapTileCollision(player: Player, mapTile: MapTile, collides: Collision, specialCollisionEvents: SpecialCollisionEvents){\r\n        \r\n        if (mapTile.solid) {\r\n            if (collides.top) {\r\n                player.yPos = mapTile.yPos + mapTile.targetSize;\r\n                player.ySpeed = 1;\r\n            }\r\n            else if (collides.bot) {\r\n                player.yPos = mapTile.yPos - player.targetSize;\r\n                player.ySpeed = 0;\r\n                player.xSpeed *= mapTile.friction;\r\n            } else if (collides.right) {\r\n                player.xPos = mapTile.xPos - player.targetSize;\r\n                player.xSpeed = 0;\r\n            } else if (collides.left) {\r\n                player.xPos = mapTile.xPos + mapTile.targetSize;\r\n                player.xSpeed = 0;\r\n            }\r\n        }\r\n\r\n        \r\n        switch (mapTile.type) {\r\n            case MapTileType.HURTFUL:\r\n                player.takeDamage();\r\n                break;\r\n\r\n            case MapTileType.TRAMPOLINE:\r\n                player.bigJump();\r\n                break;\r\n\r\n            case MapTileType.EXIT:\r\n                specialCollisionEvents.levelEnd = true;\r\n                break;\r\n            \r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    public static processEnemyMapTileCollision(enemy: Npc, mapTile: MapTile, collides: Collision){\r\n        if (mapTile.solid) {\r\n            if (collides.top) {\r\n                enemy.yPos = mapTile.yPos + mapTile.targetSize;\r\n                enemy.ySpeed = 1;\r\n            }\r\n            else if (collides.bot) {\r\n                enemy.yPos = mapTile.yPos - enemy.targetSize;\r\n                enemy.ySpeed = 0;\r\n            } else if (collides.right) {\r\n                enemy.xPos = mapTile.xPos - enemy.targetSize;\r\n                enemy.switchDirection();\r\n            } else if (collides.left) {\r\n                enemy.xPos = mapTile.xPos + mapTile.targetSize;\r\n                enemy.switchDirection();\r\n            }\r\n        }\r\n\r\n        \r\n        switch (mapTile.type) {\r\n            case MapTileType.HURTFUL:\r\n                enemy.takeDamage();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    public static processPlayerItemCollision(player: Player, item: Item, collides: Collision){\r\n        if(item instanceof Ects){\r\n            player.addEcts();\r\n            item.isCollected = true;\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    private static inRange(x:number, min:number, max:number): boolean{\r\n        return x >= min && x <= max;\r\n    }\r\n\r\n}","import Entity from \"../Entity\";\r\nimport SpritePosition from \"../../SpritePosition\";\r\nimport projectileSpriteImage from '../../images/projectileSpriteImage.jpg';\r\nimport Map from \"../../Map/Map\";\r\nimport MapTile from \"../../Map/MapTile\";\r\n\r\nexport default class Projectile extends Entity{\r\n    private _hasCollided: boolean;\r\n    private _xSpeed: number;\r\n    private _range: number;\r\n    private startXPos: number;\r\n    \r\n    constructor(xPos:number, yPos:number, _directionRight: boolean) {\r\n        let spriteMap = new Image();\r\n        spriteMap.src = projectileSpriteImage;\r\n        let spritePos = new SpritePosition(0,0);\r\n        let sourceSize = 16;\r\n        let targetSize = 32;\r\n        let collision = true;\r\n        super(xPos, yPos, spriteMap, spritePos, sourceSize, targetSize, collision);\r\n        this._xSpeed = _directionRight ? 15 : -15;\r\n        this._hasCollided = false;\r\n        this.startXPos = 0;\r\n        this._range = 10 * MapTile.targetSize;\r\n    }\r\n\r\n\r\n    public get hasCollided(): boolean {\r\n        return this._hasCollided;\r\n    }\r\n    public set hasCollided(value: boolean) {\r\n        this._hasCollided = value;\r\n    }\r\n\r\n    public updatePos(xPos: number, yPos: number){\r\n        this.startXPos = xPos;\r\n        this.xPos = xPos;\r\n        this.yPos = yPos;\r\n    }\r\n\r\n    public animate(ticks:number){}\r\n\r\n    public move(){\r\n        this.xPos += this._xSpeed;\r\n    }\r\n\r\n    public handleLevelEdgeCollision(map: Map){\r\n\r\n        if (this.xPos < 0 || this.xPos > map.mapWidth) {\r\n            this._hasCollided = true;\r\n        }\r\n\r\n    }\r\n\r\n    public fellOutOfMap(){\r\n        this._hasCollided = true;\r\n    }\r\n\r\n    public shouldBeDestroyed(){\r\n        return (this.hasCollided || this.reachedRangeLimit());\r\n    }\r\n\r\n    private reachedRangeLimit(){\r\n        return (Math.abs(this.xPos - this.startXPos) > this._range);\r\n    }\r\n\r\n\r\n}","import Character from './Character';\r\nimport playerSpriteImage from '../../images/playerSprite.jpg';\r\nimport SpritePosition from '../../SpritePosition';\r\nimport Map from '../../Map/Map';\r\nimport Projectile from '../projectiles/Projectile';\r\n\r\nexport default class Player extends Character {\r\n\r\n    private _speedLimitX: number;\r\n    private _speedLimitY: number;\r\n    private _tookDamage: boolean;\r\n    private _ects: number;\r\n    private _facingRight: boolean;\r\n    private _shootCooldown: number;\r\n    private _shootCooldownTime: number;\r\n\r\n    \r\n    constructor(xPos:number, yPos:number) {\r\n        let spriteMap = new Image();\r\n        spriteMap.src = playerSpriteImage;\r\n        let spritePos = new SpritePosition(0,0);\r\n        let sourceSize = 32;\r\n        let targetSize = 42;\r\n        let xVelocity = 2;\r\n        let xVelocityJump = 2;\r\n        let yVelocity = 25;\r\n        let friction = 0.9;\r\n        let lives = 3;\r\n        let collision = true;\r\n        super(xPos, yPos, spriteMap, spritePos, sourceSize, targetSize, xVelocity, xVelocityJump, yVelocity, friction, lives, collision);\r\n        this._speedLimitX = 12;\r\n        this._speedLimitY = 25;\r\n        this._tookDamage = false;\r\n        this._ects = 0;\r\n        this._facingRight = true;\r\n        this._shootCooldown = 0;\r\n        this._shootCooldownTime = 15;\r\n    }\r\n\r\n\r\n    public accelerateRight(){\r\n        \r\n        if(this.xSpeed < this._speedLimitX){\r\n            if(this.ySpeed === 0){\r\n                this.xSpeed += this.xVelocity * this.friction;\r\n            } else {\r\n                this.xSpeed += this.xVelocityJump * this.friction;\r\n            }\r\n        }\r\n        this._facingRight = (this.xSpeed > 0);\r\n    }\r\n\r\n    public accelerateLeft(){\r\n\r\n        if(this.xSpeed > -this._speedLimitX){\r\n            if(this.ySpeed === 0){\r\n                this.xSpeed -= this.xVelocity * this.friction;\r\n            } else {\r\n                this.xSpeed -= this.xVelocityJump * this.friction;\r\n            }\r\n        }\r\n        this._facingRight = (this.xSpeed > 0);\r\n    }\r\n\r\n    public jump(){\r\n\r\n        if(this.ySpeed === 0){\r\n            this.ySpeed -= this.yVelocity; // - because y 0 is on top of canvas so -y means upwards\r\n        }\r\n\r\n    }\r\n\r\n    public smallJump(){\r\n        if(this.ySpeed === 0){\r\n            this.ySpeed -= this.yVelocity/2; // - because y 0 is on top of canvas so -y means upwards\r\n        }\r\n    }\r\n\r\n    public bigJump(){\r\n        if(this.ySpeed === 0){\r\n            this.ySpeed -= this.yVelocity*2; // - because y 0 is on top of canvas so -y means upwards\r\n        }\r\n    }\r\n\r\n    public animate(ticks: number) {\r\n        if (ticks % 4 === 0 && (this.xSpeed !== 0 || this.ySpeed !== 0)) {\r\n            switch (this.spritePos.tileX) {\r\n                case 0:\r\n                    this.spritePos.tileX = 1;\r\n                    break;\r\n                case 1:\r\n                    this.spritePos.tileX = 2;\r\n                    break;\r\n                case 2:\r\n                    this.spritePos.tileX = 3;\r\n                    break;\r\n                case 3:\r\n                    this.spritePos.tileX = 0;\r\n                    break;\r\n                default:\r\n                    this.spritePos.tileX = 0;\r\n                    break;\r\n            }\r\n        }\r\n        else{\r\n            this.spritePos.tileX = 0;\r\n        }\r\n    }\r\n\r\n    public applyGravity(gravity:number){\r\n\r\n        this.ySpeed = (this.ySpeed+gravity > this.speedLimitY) ? this.speedLimitY : this.ySpeed+gravity;\r\n\r\n    }\r\n\r\n    public updatePos(){\r\n        this.xPos += this.xSpeed;\r\n        this.yPos += this.ySpeed;\r\n    }\r\n\r\n    public resetPlayer() {\r\n        this.lives = 3;\r\n        this._tookDamage = false;\r\n    }\r\n\r\n    public fellOutOfMap(){\r\n        this.takeDamage();\r\n    }\r\n\r\n    public takeDamage(){\r\n        super.takeDamage()\r\n        this._tookDamage = true;\r\n    }\r\n\r\n    public handleLevelEdgeCollision(map: Map){\r\n        if (this.xPos < 0) {\r\n            this.xPos = 0;\r\n            this.xSpeed = 0;\r\n        }\r\n        else if (this.xPos + this.targetSize > map.mapWidth) {\r\n            this.xPos = map.mapWidth - this.targetSize;\r\n            this.xSpeed = 0;\r\n        }\r\n    }\r\n\r\n    public shoot(): Projectile | null{\r\n\r\n        if(!this.canShoot()){\r\n            return null;\r\n        }\r\n\r\n        this._shootCooldown = this._shootCooldownTime;\r\n\r\n        if(this._facingRight){\r\n            let projectile = new Projectile(0, 0, true);\r\n            projectile.updatePos(this.xPos+this.targetSize, this.yPos);\r\n            return projectile;\r\n        }else{\r\n            let projectile = new Projectile(0, 0, false);\r\n            projectile.updatePos(this.xPos-projectile.targetSize, this.yPos);\r\n            return projectile;\r\n        }\r\n    }\r\n\r\n    public updateShootCooldown(){\r\n        if(this._shootCooldown > 0){\r\n            this._shootCooldown--;\r\n        }\r\n    }\r\n\r\n    public addEcts() {\r\n        this._ects++;\r\n    }\r\n\r\n    private canShoot(){\r\n        return (this._shootCooldown <= 0);\r\n    }\r\n\r\n    public get speedLimitY(): number {\r\n        return this._speedLimitY;\r\n    }\r\n    public set speedLimitY(value: number) {\r\n        this._speedLimitY = value;\r\n    }\r\n    public get tookDamage(): boolean {\r\n        return this._tookDamage;\r\n    }\r\n    public set tookDamage(value: boolean) {\r\n        this._tookDamage = value;\r\n    }\r\n\r\n    public get ects(): number {\r\n        return this._ects;\r\n    }\r\n\r\n}","export default class SpecialCollisionEvents {\r\n    public levelEnd: boolean = false;\r\n}\r\n","import React from 'react';\r\nimport './Game.css';\r\nimport GameCanvas from './Gamecanvas';\r\nimport GameUI from './GameUI';\r\nimport Controls from './Controls';\r\nimport Level from './Levels/Level';\r\nimport Levels from './Levels/Levels';\r\nimport CollisionMap from './Collision/CollisionMap';\r\nimport Entity from './Entities/Entity';\r\nimport Player from './Entities/characters/Player';\r\nimport Character from './Entities/characters/Character';\r\nimport Projectile from './Entities/projectiles/Projectile';\r\nimport Config from './Config';\r\nimport Ects from './Entities/items/Ects';\r\nimport MapTile from './Map/MapTile';\r\nimport SpecialCollisionEvents from './Collision/SpecialCollisionEvents';\r\nimport Npc from './Entities/characters/Npc';\r\nimport Item from './Entities/items/Item';\r\n\r\ninterface IGameProps{\r\n}\r\n\r\ninterface IGameState{\r\n    ticks: number;\r\n    currentLevel: Level;\r\n    levelPosX: number;\r\n    entities: Entity[];\r\n    currentEctsScore: number;\r\n}\r\n\r\nexport default class Game extends React.Component<IGameProps, IGameState> {\r\n\r\n    private ticks: number = 0;\r\n    private currentLevel: Level = Levels.levels[0];\r\n    private levelPosX: number = 0;\r\n    private entities: Entity[] = [];\r\n    private currentEctsScore: number = 0;\r\n\r\n    private player: Player = new Player(0,0);\r\n    private characters: Character[] = [];\r\n    private projectiles: Projectile[] = [];\r\n    private collisionMap: CollisionMap = new CollisionMap();\r\n\r\n    constructor(props:IGameProps){\r\n        super(props);\r\n        this.state = {\r\n            ticks: 0,\r\n            currentLevel: Levels.levels[0],\r\n            levelPosX: 0,\r\n            entities: [],\r\n            currentEctsScore: 0\r\n        };\r\n\r\n        this.gameLoop = this.gameLoop.bind(this);\r\n\r\n        this.startGame();\r\n    }\r\n\r\n    render(){\r\n        \r\n        return(\r\n            <div className=\"Game\">\r\n            <header className=\"Game-header\">\r\n                <GameUI/>\r\n                <GameCanvas\r\n                    currentLevel = {this.state.currentLevel}\r\n                    ticks = {this.state.ticks}\r\n                    levelPosX = {this.state.levelPosX}\r\n                    entities = {this.state.entities}/>\r\n            </header>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    private startGame() {\r\n        //hideMenus();\r\n\r\n        Controls.registerKeyEvents()\r\n\r\n        this.initializeLevel(this.currentLevel);\r\n        window.clearInterval(Config.gameInterval);\r\n        Config.gameInterval = setInterval(this.gameLoop, 1000 / Config.fps);\r\n    }\r\n\r\n    private initializeLevel(level: Level){\r\n        this.currentLevel = level;\r\n        this.collisionMap.collisionObjects = [];\r\n        this.player.resetPlayer();\r\n        this.respawnPlayer()\r\n        this.levelPosX = 0;\r\n        this.characters = this.currentLevel.enemies.slice();\r\n        this.characters.push(this.player);\r\n\r\n        this.collisionMap.collisionObjects = this.collisionMap.collisionObjects.concat(this.currentLevel.enemies);\r\n        this.collisionMap.collisionObjects = this.collisionMap.collisionObjects.concat(this.currentLevel.items);\r\n        this.collisionMap.collisionObjects = this.collisionMap.collisionObjects.concat(this.currentLevel.map.mapTiles.flat().filter(mapTile => mapTile.collision));\r\n    }\r\n\r\n    private gameLoop() {\r\n        this.ticks++;\r\n        this.characters = this.currentLevel.enemies.slice();\r\n        this.characters.push(this.player);\r\n\r\n        this.updatePlayer();\r\n        this.updateNpc();\r\n        this.updateItems();\r\n        this.updateProjectiles();\r\n\r\n        if (this.player.tookDamage) { this.respawnPlayer() }\r\n        if (this.player.isDead()){ this.gameOver() };\r\n        \r\n        this.updateState();\r\n\r\n    }\r\n\r\n    updateState(){\r\n\r\n        this.entities = [];\r\n        this.entities = this.entities.concat(this.currentLevel.items);\r\n        this.entities = this.entities.concat(this.currentLevel.enemies);\r\n        this.entities = this.entities.concat(this.projectiles);\r\n        this.entities.push(this.player);\r\n\r\n        this.setState({\r\n            currentEctsScore: this.currentEctsScore,\r\n            currentLevel: this.currentLevel,\r\n            entities: this.entities,\r\n            levelPosX: this.levelPosX,\r\n            ticks: this.ticks\r\n        });\r\n    }\r\n\r\n    \r\n\r\n    private updatePlayer(){\r\n\r\n        if(Controls.heldRight){\r\n            this.player.accelerateRight();\r\n        }\r\n        if (Controls.heldLeft){\r\n            this.player.accelerateLeft();\r\n        }\r\n\r\n        if (Controls.heldUp){\r\n            this.player.jump();\r\n        }\r\n\r\n        if (Controls.heldE){\r\n            let projectile = this.player.shoot();\r\n            if(projectile){\r\n                this.projectiles.push(projectile);\r\n            }\r\n        }\r\n\r\n        //make sure x and y speed is 0 if player practically standing still\r\n        if (Math.abs(this.player.xSpeed) < 0.8) this.player.xSpeed = 0;\r\n        if (Math.abs(this.player.ySpeed) < 0.1) this.player.ySpeed = 0;\r\n\r\n        this.player.animate(this.ticks);\r\n\r\n        this.player.applyGravity(Config.gravity);\r\n\r\n        this.player.updatePos();\r\n        this.player.updateShootCooldown();\r\n\r\n        this.checkLevelEdgeCollision(this.player);\r\n        this.updateMapPosition(this.player);\r\n\r\n        this.checkPlayerCollisions();\r\n\r\n    }\r\n\r\n    private updateNpc(){\r\n        \r\n        this.currentLevel.enemies.forEach((enemy, index, object) => {\r\n\r\n            if(enemy.isDead()){\r\n                object.splice(index, 1);\r\n                this.collisionMap.collisionObjects.splice(this.collisionMap.collisionObjects.findIndex(x => x.id === enemy.id), 1);\r\n                return;\r\n            }\r\n\r\n            enemy.animate(this.ticks);\r\n            enemy.move(this.currentLevel.map);\r\n            enemy.applyGravity(Config.gravity);\r\n\r\n            this.checkLevelEdgeCollision(enemy);\r\n            this.checkEnemyCollisions(enemy);\r\n\r\n        });\r\n\r\n    }\r\n\r\n    private updateItems(){\r\n\r\n        this.currentLevel.items.forEach( item => {\r\n            if(item.isCollected){\r\n                if(item instanceof Ects){\r\n                    this.currentEctsScore ++;\r\n                }\r\n            }\r\n            item.animate(this.ticks);\r\n        });\r\n\r\n        this.currentLevel.items = this.currentLevel.items.filter(item => !item.isCollected);\r\n\r\n    }\r\n    \r\n    private updateProjectiles(){\r\n        this.projectiles.forEach((projectile, index, object) => {\r\n\r\n            if(projectile.shouldBeDestroyed()){\r\n                object.splice(index, 1);\r\n                \r\n                let collisionMapProjectileIndex = this.collisionMap.collisionObjects.findIndex(x => x.id === projectile.id);\r\n\r\n                if( collisionMapProjectileIndex !== -1){\r\n                    this.collisionMap.collisionObjects.splice(collisionMapProjectileIndex, 1);\r\n                }\r\n                \r\n                return;\r\n            }\r\n\r\n            projectile.animate(this.ticks);\r\n            projectile.move();\r\n\r\n            this.checkLevelEdgeCollision(projectile);\r\n            this.checkProjectileCollisions(projectile);\r\n        });\r\n        \r\n    }\r\n\r\n    \r\n    private checkLevelEdgeCollision(entity: Entity){\r\n        entity.handleLevelEdgeCollision(this.currentLevel.map);\r\n        \r\n        // die on level bottom\r\n        if (entity.yPos > this.currentLevel.map.mapHeight - MapTile.targetSize) {\r\n            entity.fellOutOfMap();\r\n        }\r\n    }\r\n\r\n    private updateMapPosition(player: Player){\r\n        // move the player when the level is at it's border, else move the level\r\n        if (this.levelPosX <= 0) {\r\n            if (player.xPos > (Config.canvasSize.w / 2)) {\r\n                this.levelPosX = 1;\r\n            }\r\n        } else if (this.levelPosX >= this.currentLevel.map.mapWidth - Config.canvasSize.w && this.currentLevel.map.mapWidth > Config.canvasSize.w) {\r\n            this.levelPosX = this.currentLevel.map.mapWidth - Config.canvasSize.w;\r\n            if (player.xPos < this.currentLevel.map.mapWidth - (Config.canvasSize.w / 2)) {\r\n                this.levelPosX = this.currentLevel.map.mapWidth - Config.canvasSize.w - 1;\r\n            }\r\n        } else if (this.currentLevel.map.mapWidth > Config.canvasSize.w) {\r\n            this.levelPosX += player.xSpeed;\r\n        }\r\n    }\r\n\r\n    private checkPlayerCollisions(){\r\n        this.collisionMap.collisionObjects.forEach(collisionObject => {\r\n            \r\n            let collides = CollisionMap.checkCollision(this.player, collisionObject);\r\n\r\n            if(collides.doesCollide()){\r\n                let specialCollisionEvent = new SpecialCollisionEvents();\r\n\r\n                if (collisionObject instanceof Npc){\r\n                    CollisionMap.processPlayerNpcCollision(this.player, collisionObject as Npc, collides);\r\n                }\r\n                else if (collisionObject instanceof MapTile){\r\n                    CollisionMap.processPlayerMapTileCollision(this.player, collisionObject as MapTile, collides, specialCollisionEvent);\r\n                }\r\n                else if (collisionObject instanceof Item){\r\n                    CollisionMap.processPlayerItemCollision(this.player, collisionObject as Item, collides);\r\n                }\r\n                if(specialCollisionEvent.levelEnd){\r\n                    this.endLevel();\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n    private checkEnemyCollisions(enemy: Npc){\r\n        this.collisionMap.collisionObjects.forEach(collisionObject => {\r\n            \r\n            //only check for collision with MapTiles\r\n            if(collisionObject instanceof MapTile){\r\n                let collides = CollisionMap.checkCollision(enemy, collisionObject);\r\n                CollisionMap.processEnemyMapTileCollision(enemy, collisionObject as MapTile, collides);\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n    private checkProjectileCollisions(projectile: Projectile){\r\n        this.collisionMap.collisionObjects.forEach(collisionObject => {\r\n            let collides = CollisionMap.checkCollision(projectile, collisionObject);\r\n            if(collides.doesCollide()){\r\n                if(collisionObject instanceof MapTile){\r\n                    projectile.hasCollided = true;\r\n                }else if(collisionObject instanceof Npc){\r\n                    (collisionObject as Npc).takeDamage();\r\n                    projectile.hasCollided = true;\r\n                }\r\n            }\r\n            \r\n        });\r\n    }\r\n\r\n    private respawnPlayer(){\r\n        this.player.xPos = 0;\r\n        this.player.yPos = this.currentLevel.map.getGroundLevel()-10;\r\n        this.player.xSpeed = 0;\r\n        this.player.ySpeed = 0;\r\n        this.player.tookDamage = false;\r\n        this.levelPosX = 0;\r\n    }\r\n\r\n    private endLevel(){\r\n\r\n        let currentLevelIndex = Levels.levels.findIndex(l => l.name === this.currentLevel.name);\r\n        if(Levels.levels.length === currentLevelIndex+1){\r\n            this.gameEnd();\r\n        } else{\r\n            this.initializeLevel(Levels.levels[currentLevelIndex+1]);\r\n        }\r\n    }\r\n\r\n    private gameOver(){\r\n        //TODO implement\r\n        alert(\"you lost!\");\r\n    }\r\n\r\n    private gameEnd(){\r\n        //TODO implement\r\n        alert(\"you won!\");\r\n    }\r\n\r\n}\r\n","import React from 'react';\r\nimport './App.css';\r\nimport Game from './game/Game';\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <h1>Life of PiBS</h1>\r\n        <Game/>\r\n      </header>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}